[{"content":"å‡½æ•°ç»„ä»¶ä¼šæ•è· render å†…éƒ¨çš„çŠ¶æ€ï¼Œè¿™æ˜¯ä¸¤ç±»ç»„ä»¶æœ€å¤§çš„ä¸åŒã€‚ React æ¡†æ¶çš„ä¸»è¦å·¥ä½œï¼Œå°±æ˜¯åŠæ—¶åœ°æŠŠå£°æ˜å¼çš„ä»£ç è½¬æ¢ä¸ºå‘½ä»¤å¼çš„ DOM æ“ä½œï¼ŒæŠŠæ•°æ®å±‚é¢çš„æè¿°æ˜ å°„åˆ°ç”¨æˆ·å¯è§çš„ UI å˜åŒ–ä¸­å»ã€‚è¿™å°±æ„å‘³ç€ä»åŸåˆ™ä¸Šæ¥è®²ï¼ŒReact çš„æ•°æ®åº”è¯¥æ€»æ˜¯ç´§ç´§åœ°å’Œæ¸²æŸ“ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œè€Œç±»ç»„ä»¶åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚\nå¦‚æœä½ åœ¨è¿™ä¸ªåœ¨çº¿ Demoä¸­å°è¯•ç‚¹å‡»åŸºäºç±»ç»„ä»¶å½¢å¼ç¼–å†™çš„ ProfilePage æŒ‰é’®å 3s å†…æŠŠç”¨æˆ·åˆ‡æ¢ä¸º Sophieï¼Œä½ å°±ä¼šçœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ•ˆæœï¼š\næ˜æ˜æˆ‘ä»¬æ˜¯åœ¨ Dan çš„ä¸»é¡µç‚¹å‡»çš„å…³æ³¨ï¼Œç»“æœå´æç¤ºäº†â€œFollowed Sophieâ€ï¼\nè¿™ä¸ªç°è±¡å¿…ç„¶è®©è®¸å¤šäººæ„Ÿåˆ°å›°æƒ‘ï¼šuser çš„å†…å®¹æ˜¯é€šè¿‡ props ä¸‹å‘çš„ï¼Œprops ä½œä¸ºä¸å¯å˜å€¼ï¼Œä¸ºä»€ä¹ˆä¼šä» Dan å˜æˆ Sophie å‘¢ï¼Ÿ\nå› ä¸ºè™½ç„¶ props æœ¬èº«æ˜¯ä¸å¯å˜çš„ï¼Œä½† this å´æ˜¯å¯å˜çš„ï¼Œthis ä¸Šçš„æ•°æ®æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ï¼Œthis.props çš„è°ƒç”¨æ¯æ¬¡éƒ½ä¼šè·å–æœ€æ–°çš„ propsï¼Œè€Œè¿™æ­£æ˜¯ React ç¡®ä¿æ•°æ®å®æ—¶æ€§çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µã€‚\nå¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨ React ç”Ÿå‘½å‘¨æœŸå¯¹æ‰§è¡Œé¡ºåºçš„è°ƒæ§ä¸‹ï¼Œthis.props å’Œ this.state çš„å˜åŒ–éƒ½èƒ½å¤Ÿå’Œé¢„æœŸä¸­çš„æ¸²æŸ“åŠ¨ä½œä¿æŒä¸€è‡´ã€‚ä½†åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ setTimeout å°†é¢„æœŸä¸­çš„æ¸²æŸ“æ¨è¿Ÿäº† 3sï¼Œæ‰“ç ´äº† this.props å’Œæ¸²æŸ“åŠ¨ä½œä¹‹é—´çš„è¿™ç§æ—¶æœºä¸Šçš„å…³è”ï¼Œè¿›è€Œå¯¼è‡´æ¸²æŸ“æ—¶æ•è·åˆ°çš„æ˜¯ä¸€ä¸ªé”™è¯¯çš„ã€ä¿®æ”¹åçš„ this.propsã€‚è¿™å°±æ˜¯é—®é¢˜çš„æ‰€åœ¨ã€‚\nä½†å¦‚æœæˆ‘ä»¬æŠŠ ProfilePage æ”¹é€ ä¸ºä¸€ä¸ªåƒè¿™æ ·çš„å‡½æ•°ç»„ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 function ProfilePage(props) { const showMessage = () =\u0026gt; { alert(\u0026#39;Followed \u0026#39; + props.user); }; const handleClick = () =\u0026gt; { setTimeout(showMessage, 3000); }; return ( \u0026lt;button onClick={handleClick}\u0026gt;Follow\u0026lt;/button\u0026gt; ); } äº‹æƒ…å°±ä¼šå¤§ä¸ä¸€æ ·ã€‚\nprops ä¼šåœ¨ ProfilePage å‡½æ•°æ‰§è¡Œçš„ä¸€ç¬é—´å°±è¢«æ•è·ï¼Œè€Œ props æœ¬èº«åˆæ˜¯ä¸€ä¸ªä¸å¯å˜å€¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å……åˆ†ç¡®ä¿ä»ç°åœ¨å¼€å§‹ï¼Œåœ¨ä»»ä½•æ—¶æœºä¸‹è¯»å–åˆ°çš„ propsï¼Œéƒ½æ˜¯æœ€åˆæ•è·åˆ°çš„é‚£ä¸ª propsã€‚å½“çˆ¶ç»„ä»¶ä¼ å…¥æ–°çš„ props æ¥å°è¯•é‡æ–°æ¸²æŸ“ ProfilePage æ—¶ï¼Œæœ¬è´¨ä¸Šæ˜¯åŸºäºæ–°çš„ props å…¥å‚å‘èµ·äº†ä¸€æ¬¡å…¨æ–°çš„å‡½æ•°è°ƒç”¨ï¼Œå¹¶ä¸ä¼šå½±å“ä¸Šä¸€æ¬¡è°ƒç”¨å¯¹ä¸Šä¸€ä¸ª props çš„æ•è·ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ä¾¿ç¡®ä¿äº†æ¸²æŸ“ç»“æœç¡®å®èƒ½å¤Ÿç¬¦åˆé¢„æœŸã€‚\næ€»ç»“ï¼šâ€œå‡½æ•°ç»„ä»¶ä¼šæ•è· render å†…éƒ¨çš„çŠ¶æ€â€ï¼Œå‡½æ•°ç»„ä»¶çœŸæ­£åœ°æŠŠæ•°æ®å’Œæ¸²æŸ“ç»‘å®šåˆ°äº†ä¸€èµ·ã€‚\nå‡½æ•°ç»„ä»¶æ˜¯ä¸€ä¸ªæ›´åŠ åŒ¹é…Reactè®¾è®¡ç†å¿µã€ä¹Ÿæ›´æœ‰åˆ©äºé€»è¾‘æ‹†åˆ†ä¸é‡ç”¨çš„ç»„ä»¶è¡¨è¾¾å½¢å¼ï¼ŒReact-Hooks ä¾¿åº”è¿è€Œç”Ÿã€‚\nä»æ ¸å¿ƒ API çœ‹ Hooks çš„åŸºæœ¬å½¢æ€ useState()ï¼šä¸ºå‡½æ•°ç»„ä»¶å¼•å…¥çŠ¶æ€ 1 2 3 4 5 6 7 8 9 10 11 12 const [state, setState] = useState(initialState); //çŠ¶æ€å’Œä¿®æ”¹çŠ¶æ€çš„ API åéƒ½æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ const [text, setText] = useState(\u0026#34;åˆå§‹æ–‡æœ¬\u0026#34;); //å®ƒå°±åƒç±»ç»„ä»¶ä¸­ state å¯¹è±¡çš„æŸä¸€ä¸ªå±æ€§ä¸€æ ·ï¼Œå¯¹åº”ç€ä¸€ä¸ªå•ç‹¬çš„çŠ¶æ€ï¼Œå…è®¸ä½ å­˜å‚¨ä»»æ„ç±»å‹çš„å€¼ // å®šä¹‰ä¸ºæ•°ç»„ const [author, setAuthor] = useState([\u0026#34;xiuyan\u0026#34;, \u0026#34;cuicui\u0026#34;, \u0026#34;yisi\u0026#34;]); // å®šä¹‰ä¸ºæ•°å€¼ const [length, setLength] = useState(100); // å®šä¹‰ä¸ºå­—ç¬¦ä¸² const [text, setText] = useState(\u0026#34;åˆå§‹æ–‡æœ¬\u0026#34;) useEffect()ï¼šå…è®¸å‡½æ•°ç»„ä»¶æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ ","permalink":"https://zzydev.top/posts/headfirstreact/react-hooks%E8%AE%BE%E8%AE%A1%E5%8A%A8%E6%9C%BA%E4%B8%8E%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F/","summary":"å‡½æ•°ç»„ä»¶ä¼šæ•è· render å†…éƒ¨çš„çŠ¶æ€ï¼Œè¿™æ˜¯ä¸¤ç±»ç»„ä»¶æœ€å¤§çš„ä¸åŒã€‚ React æ¡†æ¶çš„ä¸»è¦å·¥ä½œï¼Œå°±æ˜¯åŠæ—¶åœ°æŠŠå£°æ˜å¼çš„ä»£ç è½¬æ¢ä¸ºå‘½ä»¤å¼çš„ DOM æ“ä½œï¼ŒæŠŠæ•°æ®å±‚é¢çš„æè¿°æ˜ å°„åˆ°ç”¨","title":"React Hooksè®¾è®¡åŠ¨æœºä¸å·¥ä½œæ¨¡å¼"},{"content":"React çš„æ ¸å¿ƒç‰¹å¾æ˜¯â€œæ•°æ®é©±åŠ¨è§†å›¾â€ï¼Œå³ UI = render(data)\nåŸºäº props çš„å•å‘æ•°æ®æµ æ‰€è°“å•å‘æ•°æ®æµï¼ŒæŒ‡çš„å°±æ˜¯å½“å‰ç»„ä»¶çš„ state ä»¥ props çš„å½¢å¼æµåŠ¨æ—¶ï¼Œåªèƒ½æµå‘ç»„ä»¶æ ‘ä¸­æ¯”è‡ªå·±å±‚çº§æ›´ä½çš„ç»„ä»¶ã€‚ æ¯”å¦‚åœ¨çˆ¶-å­ç»„ä»¶è¿™ç§åµŒå¥—å…³ç³»ä¸­ï¼Œåªèƒ½ç”±çˆ¶ç»„ä»¶ä¼  props ç»™å­ç»„ä»¶ï¼Œè€Œä¸èƒ½åè¿‡æ¥ã€‚\nçˆ¶å­ç»„ä»¶é€šä¿¡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 // å­ç»„ä»¶ function Child(props) { return ( \u0026lt;div className=\u0026#34;child\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{`å­ç»„ä»¶æ‰€æ¥æ”¶åˆ°çš„æ¥è‡ªçˆ¶ç»„ä»¶çš„æ–‡æœ¬å†…å®¹æ˜¯ï¼š[${props.fatherText}]`}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; ); } //çˆ¶ç»„ä»¶ class Father extends React.Component { // åˆå§‹åŒ–çˆ¶ç»„ä»¶çš„ state state = { text: \u0026#34;åˆå§‹åŒ–çš„çˆ¶ç»„ä»¶çš„æ–‡æœ¬\u0026#34; }; // æŒ‰é’®çš„ç›‘å¬å‡½æ•°ï¼Œç”¨äºæ›´æ–° text å€¼ changeText = () =\u0026gt; { this.setState({ text: \u0026#34;æ”¹å˜åçš„çˆ¶ç»„ä»¶æ–‡æœ¬\u0026#34; }); }; // æ¸²æŸ“çˆ¶ç»„ä»¶ render() { return ( \u0026lt;div className=\u0026#34;father\u0026#34;\u0026gt; \u0026lt;button onClick={this.changeText}\u0026gt; ç‚¹å‡»ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ å…¥å­ç»„ä»¶çš„æ–‡æœ¬ \u0026lt;/button\u0026gt; {/* å¼•å…¥å­ç»„ä»¶ï¼Œå¹¶é€šè¿‡ props ä¸‹å‘å…·ä½“çš„çŠ¶æ€å€¼å®ç°çˆ¶-å­é€šä¿¡ */} \u0026lt;Child fatherText={this.state.text} /\u0026gt; \u0026lt;/div\u0026gt; ); } } å­-çˆ¶ç»„ä»¶é€šä¿¡ è€ƒè™‘åˆ° props æ˜¯å•å‘çš„ï¼Œå­ç»„ä»¶å¹¶ä¸èƒ½ç›´æ¥å°†è‡ªå·±çš„æ•°æ®å¡ç»™çˆ¶ç»„ä»¶ï¼Œä½† props çš„å½¢å¼ä¹Ÿå¯ä»¥æ˜¯å¤šæ ·çš„ã€‚å‡å¦‚çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„æ˜¯ä¸€ä¸ªç»‘å®šäº†è‡ªèº«ä¸Šä¸‹æ–‡çš„å‡½æ•°ï¼Œé‚£ä¹ˆå­ç»„ä»¶åœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå°±å¯ä»¥å°†æƒ³è¦äº¤ç»™çˆ¶ç»„ä»¶çš„æ•°æ®ä»¥å‡½æ•°å…¥å‚çš„å½¢å¼ç»™å‡ºå»ï¼Œä»¥æ­¤æ¥é—´æ¥åœ°å®ç°æ•°æ®ä»å­ç»„ä»¶åˆ°çˆ¶ç»„ä»¶çš„æµåŠ¨ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 class Child extends React.Component { // åˆå§‹åŒ–å­ç»„ä»¶çš„ state state = { text: \u0026#39;å­ç»„ä»¶çš„æ–‡æœ¬\u0026#39; } // å­ç»„ä»¶çš„æŒ‰é’®ç›‘å¬å‡½æ•° changeText = () =\u0026gt; { // changeText ä¸­ï¼Œè°ƒç”¨äº†çˆ¶ç»„ä»¶ä¼ å…¥çš„ changeFatherText æ–¹æ³• this.props.changeFatherText(this.state.text) } render() { return ( \u0026lt;div className=\u0026#34;child\u0026#34;\u0026gt; {/* æ³¨æ„è¿™é‡ŒæŠŠä¿®æ”¹çˆ¶ç»„ä»¶æ–‡æœ¬çš„åŠ¨ä½œæ”¾åœ¨äº† Child é‡Œ */} \u0026lt;button onClick={this.changeText}\u0026gt; ç‚¹å‡»æ›´æ–°çˆ¶ç»„ä»¶çš„æ–‡æœ¬ \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ); } } class Father extends React.Component { // åˆå§‹åŒ–çˆ¶ç»„ä»¶çš„ state state = { text: \u0026#34;åˆå§‹åŒ–çš„çˆ¶ç»„ä»¶çš„æ–‡æœ¬\u0026#34; }; // è¿™ä¸ªæ–¹æ³•ä¼šä½œä¸º props ä¼ ç»™å­ç»„ä»¶ï¼Œç”¨äºæ›´æ–°çˆ¶ç»„ä»¶ text å€¼ã€‚newText æ­£æ˜¯å¼€æ”¾ç»™å­ç»„ä»¶çš„æ•°æ®é€šä¿¡å…¥å£ changeText = (newText) =\u0026gt; { this.setState({ text: newText }); }; // æ¸²æŸ“çˆ¶ç»„ä»¶ render() { return ( \u0026lt;div className=\u0026#34;father\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{`çˆ¶ç»„ä»¶çš„æ–‡æœ¬å†…å®¹æ˜¯ï¼š[${this.state.text}]`}\u0026lt;/p\u0026gt; {/* å¼•å…¥å­ç»„ä»¶ï¼Œå¹¶é€šè¿‡ props ä¸­ä¸‹å‘å¯ä¼ å‚çš„å‡½æ•° å®ç°å­-çˆ¶é€šä¿¡ */} \u0026lt;Child changeFatherText={this.changeText} /\u0026gt; \u0026lt;/div\u0026gt; ); } å…„å¼Ÿç»„ä»¶é€šä¿¡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 function Child(props) { return ( \u0026lt;div className=\u0026#34;child\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{`å­ç»„ä»¶æ‰€æ¥æ”¶åˆ°çš„æ¥è‡ªçˆ¶ç»„ä»¶çš„æ–‡æœ¬å†…å®¹æ˜¯ï¼š[${props.fatherText}]`}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; ); } class NewChild extends React.Component { state = { text: \u0026#34;æ¥è‡ª newChild çš„æ–‡æœ¬\u0026#34; }; // NewChild ç»„ä»¶çš„æŒ‰é’®ç›‘å¬å‡½æ•° changeText = () =\u0026gt; { // changeText ä¸­ï¼Œè°ƒç”¨äº†çˆ¶ç»„ä»¶ä¼ å…¥çš„ changeFatherText æ–¹æ³• this.props.changeFatherText(this.state.text); }; render() { return ( \u0026lt;div className=\u0026#34;child\u0026#34;\u0026gt; {/* æ³¨æ„è¿™é‡ŒæŠŠä¿®æ”¹çˆ¶ç»„ä»¶æ–‡æœ¬ï¼ˆåŒæ—¶ä¹Ÿæ˜¯ Child ç»„ä»¶çš„æ–‡æœ¬ï¼‰çš„åŠ¨ä½œæ”¾åœ¨äº† NewChild é‡Œ */} \u0026lt;button onClick={this.changeText}\u0026gt;ç‚¹å‡»æ›´æ–° Child ç»„ä»¶çš„æ–‡æœ¬\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ); } } class Father extends React.Component { // åˆå§‹åŒ–çˆ¶ç»„ä»¶çš„ state state = { text: \u0026#34;åˆå§‹åŒ–çš„çˆ¶ç»„ä»¶çš„æ–‡æœ¬\u0026#34; }; // ä¼ ç»™ NewChild ç»„ä»¶æŒ‰é’®çš„ç›‘å¬å‡½æ•°ï¼Œç”¨äºæ›´æ–°çˆ¶ç»„ä»¶ text å€¼ï¼ˆè¿™ä¸ª text å€¼åŒæ—¶ä¹Ÿæ˜¯ Child çš„ propsï¼‰ changeText = (newText) =\u0026gt; { this.setState({ text: newText }); }; // æ¸²æŸ“çˆ¶ç»„ä»¶ render() { return ( \u0026lt;div className=\u0026#34;father\u0026#34;\u0026gt; {/* å¼•å…¥ Child ç»„ä»¶ï¼Œå¹¶é€šè¿‡ props ä¸­ä¸‹å‘å…·ä½“çš„çŠ¶æ€å€¼ å®ç°çˆ¶-å­é€šä¿¡ */} \u0026lt;Child fatherText={this.state.text} /\u0026gt; {/* å¼•å…¥ NewChild ç»„ä»¶ï¼Œå¹¶é€šè¿‡ props ä¸­ä¸‹å‘å¯ä¼ å‚çš„å‡½æ•° å®ç°å­-çˆ¶é€šä¿¡ */} \u0026lt;NewChild changeFatherText={this.changeText} /\u0026gt; \u0026lt;/div\u0026gt; ); } } åˆ©ç”¨â€œå‘å¸ƒ-è®¢é˜…â€æ¨¡å¼é©±åŠ¨æ•°æ®æµ ä½¿ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„ä¼˜ç‚¹åœ¨äºï¼Œç›‘å¬äº‹ä»¶çš„ä½ç½®å’Œè§¦å‘äº‹ä»¶çš„ä½ç½®æ˜¯ä¸å—é™çš„ï¼Œåªè¦å®ƒä»¬åœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡é‡Œï¼Œå°±èƒ½å¤Ÿå½¼æ­¤æ„ŸçŸ¥ã€‚è¿™ä¸ªç‰¹æ€§ï¼Œå¤ªé€‚åˆç”¨æ¥åº”å¯¹â€œä»»æ„ç»„ä»¶é€šä¿¡â€è¿™ç§åœºæ™¯äº†ã€‚\nå‘å¸ƒ-è®¢é˜…æ¨¡å‹ API è®¾è®¡æ€è·¯ on()ï¼šè´Ÿè´£æ³¨å†Œäº‹ä»¶çš„ç›‘å¬å™¨ï¼ŒæŒ‡å®šäº‹ä»¶è§¦å‘æ—¶çš„å›è°ƒå‡½æ•°ã€‚ emit()ï¼šè´Ÿè´£è§¦å‘äº‹ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¼ å‚ä½¿å…¶åœ¨è§¦å‘çš„æ—¶å€™æºå¸¦æ•°æ® ã€‚ off()ï¼šè´Ÿè´£ç›‘å¬å™¨çš„åˆ é™¤ã€‚ å‘å¸ƒ-è®¢é˜…æ¨¡å‹ç¼–ç å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 class myEventEmitter { constructor() { // eventMap ç”¨æ¥å­˜å‚¨äº‹ä»¶å’Œç›‘å¬å‡½æ•°ä¹‹é—´çš„å…³ç³» this.eventMap = {}; } // type è¿™é‡Œå°±ä»£è¡¨äº‹ä»¶çš„åç§° on(type, handler) { // hanlder å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœä¸æ˜¯ç›´æ¥æŠ¥é”™ if (!(handler instanceof Function)) { throw new Error(\u0026#34;hanlderå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°\u0026#34;); } // åˆ¤æ–­ type äº‹ä»¶å¯¹åº”çš„é˜Ÿåˆ—æ˜¯å¦å­˜åœ¨ if (!this.eventMap[type]) { // è‹¥ä¸å­˜åœ¨ï¼Œæ–°å»ºè¯¥é˜Ÿåˆ— this.eventMap[type] = []; } // è‹¥å­˜åœ¨ï¼Œç›´æ¥å¾€é˜Ÿåˆ—é‡Œæ¨å…¥ handler this.eventMap[type].push(handler); } // åˆ«å¿˜äº†æˆ‘ä»¬å‰é¢è¯´è¿‡è§¦å‘æ—¶æ˜¯å¯ä»¥æºå¸¦æ•°æ®çš„ï¼Œparams å°±æ˜¯æ•°æ®çš„è½½ä½“ emit(type, params) { // å‡è®¾è¯¥äº‹ä»¶æ˜¯æœ‰è®¢é˜…çš„ï¼ˆå¯¹åº”çš„äº‹ä»¶é˜Ÿåˆ—å­˜åœ¨ï¼‰ if (this.eventMap[type]) { // å°†äº‹ä»¶é˜Ÿåˆ—é‡Œçš„ handler ä¾æ¬¡æ‰§è¡Œå‡ºé˜Ÿ this.eventMap[type].forEach((handler, index) =\u0026gt; { // æ³¨æ„åˆ«å¿˜äº†è¯»å– params handler(params); }); } } off(type, handler) { if (this.eventMap[type]) { // indexOfæ‰¾ä¸åˆ°å…ƒç´ ä¼šè¿”å›-1ï¼Œspliceä»å³å¾€å·¦æˆªå–ï¼Œå³ç§»è¿ç®—ä¼šå°†-1å˜æˆ4294967295 this.eventMap[type].splice(this.eventMap[type].indexOf(handler) \u0026gt;\u0026gt;\u0026gt; 0, 1); } } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 // æ³¨æ„è¿™ä¸ª myEvent æ˜¯æå‰å®ä¾‹åŒ–å¹¶æŒ‚è½½åˆ°å…¨å±€çš„ï¼Œæ­¤å¤„ä¸å†é‡å¤ç¤ºèŒƒå®ä¾‹åŒ–è¿‡ç¨‹ const globalEvent = window.myEvent; class B extends React.Component { // è¿™é‡Œçœç•¥æ‰å…¶ä»–ä¸šåŠ¡é€»è¾‘ state = { newParams: \u0026#34;\u0026#34;, }; handler = (params) =\u0026gt; { this.setState({ newParams: params, }); }; bindHandler = () =\u0026gt; { globalEvent.on(\u0026#34;someEvent\u0026#34;, this.handler); }; render() { return ( \u0026lt;div\u0026gt; \u0026lt;button onClick={this.bindHandler}\u0026gt;ç‚¹æˆ‘ç›‘å¬Açš„åŠ¨ä½œ\u0026lt;/button\u0026gt; \u0026lt;div\u0026gt;Aä¼ å…¥çš„å†…å®¹æ˜¯[{this.state.newParams}]\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); } } class A extends React.Component { // è¿™é‡Œçœç•¥æ‰å…¶ä»–ä¸šåŠ¡é€»è¾‘ state = { infoToB: \u0026#34;å“ˆå“ˆå“ˆå“ˆæˆ‘æ¥è‡ªA\u0026#34;, }; reportToB = () =\u0026gt; { // è¿™é‡Œçš„ infoToB è¡¨ç¤º A è‡ªèº«çŠ¶æ€ä¸­éœ€è¦è®© B æ„ŸçŸ¥çš„é‚£éƒ¨åˆ†æ•°æ® globalEvent.emit(\u0026#34;someEvent\u0026#34;, this.state.infoToB); }; render() { return \u0026lt;button onClick={this.reportToB}\u0026gt;ç‚¹æˆ‘æŠŠstateä¼ é€’ç»™B\u0026lt;/button\u0026gt;; } } export default function App() { return ( \u0026lt;div className=\u0026#34;App\u0026#34;\u0026gt; \u0026lt;B /\u0026gt; \u0026lt;A /\u0026gt; \u0026lt;/div\u0026gt; ); } ä½¿ç”¨Contextç»´æŠ¤å…¨å±€çŠ¶æ€ useContext\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 //ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªcontextå¯¹è±¡,å¯ä»¥é€‰æ‹©æ€§åœ°ä¼ å…¥ä¸€ä¸ªdefaultValue const AppContext = React.createContext(defaultValue) //ä»åˆ›å»ºå‡ºçš„contextå¯¹è±¡ä¸­ï¼Œå¯ä»¥è¯»å–åˆ° Provider å’Œ Consumer const { Provider, Consumer } = AppContext //ä½¿ç”¨ Provider å¯¹ç»„ä»¶æ ‘ä¸­çš„æ ¹ç»„ä»¶è¿›è¡ŒåŒ…è£¹ï¼Œ //ç„¶åä¼ å…¥åä¸ºâ€œvalueâ€çš„å±æ€§ï¼Œè¿™ä¸ª value å°±æ˜¯åç»­åœ¨ç»„ä»¶æ ‘ä¸­æµåŠ¨çš„â€œæ•°æ®â€ï¼Œ //å®ƒå¯ä»¥è¢« Consumer æ¶ˆè´¹ã€‚ \u0026lt;Provider value={title: this.state.title, content: this.state.content}\u0026gt; \u0026lt;Title /\u0026gt; \u0026lt;Content /\u0026gt; \u0026lt;/Provider\u0026gt; //Consumerï¼Œé¡¾åæ€ä¹‰å°±æ˜¯â€œæ•°æ®çš„æ¶ˆè´¹è€…â€ï¼Œå®ƒå¯ä»¥è¯»å– Provider ä¸‹å‘ä¸‹æ¥çš„æ•°æ® //å…¶ç‰¹ç‚¹æ˜¯éœ€è¦æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå­å…ƒç´ ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ªç»„ä»¶ã€‚ \u0026lt;Consumer\u0026gt; {value =\u0026gt; \u0026lt;div\u0026gt;{value.title}\u0026lt;/div\u0026gt;} \u0026lt;/Consumer\u0026gt; //æ³¨æ„: å½“ Consumer æ²¡æœ‰å¯¹åº”çš„ Provider æ—¶ï¼Œ //value å‚æ•°ä¼šç›´æ¥å–åˆ›å»º context æ—¶ä¼ é€’ç»™ createContext çš„ defaultValueã€‚ Redux createStore.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 const createStore = (reducer, enhancer) =\u0026gt; { if (enhancer) { return enhancer(createStore)(reducer); } let currentState = void 0; let currentListeners = []; const getState = () =\u0026gt; currentState; const dispatch = (action) =\u0026gt; { currentState = reducer(currentState, action); currentListeners.forEach((listener) =\u0026gt; listener()); }; const subscribe = (listener) =\u0026gt; { currentListeners.push(listener); return () =\u0026gt; { const index = currentListeners.indexOf(listener); currentListeners.splice(index, 1); }; }; //æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡è®¢é˜…ï¼ŒåŠ ä¸Šé»˜è®¤å€¼ dispatch({ type: \u0026#34;@zâ€”redux/INIT\u0026#34; }); return { getState, dispatch, subscribe, }; }; export default createStore; applyMiddleware.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 const applyMiddleware = (...middleware) =\u0026gt; { return (createStore) =\u0026gt; (reducer) =\u0026gt; { const store = createStore(reducer); let dispatch = store.dispatch; const midApi = { getState: store.getState, dispatch: (action, ...args) =\u0026gt; dispatch(action, ...args), }; const chain = middleware.map((middleware) =\u0026gt; middleware(midApi)); dispatch = compose(...chain)(store.dispatch); return { ...store, dispatch, }; }; }; const compose = (...funcs) =\u0026gt; { if (funcs.length === 0) { return (arg) =\u0026gt; arg; } if (funcs.length === 1) { return funcs[0]; } return funcs.reduce( (a, b) =\u0026gt; (...args) =\u0026gt; a(b(...args)) ); }; export default applyMiddleware; combineReducer.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const combineReducers = (reducers) =\u0026gt; (state = {}, action) =\u0026gt; { let nextState = {}; let hasChange = false; for (let key in reducers) { const reducer = reducers[key]; nextState[key] = reducer(state[key], action); hasChange = hasChange || nextState[key] !== state[key]; } hasChange = hasChange || Object.keys(nextState) !== Object.keys(state); return hasChange ? nextState : state; }; export default combineReducers; React-Redux 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 import { useReducer } from \u0026#34;react\u0026#34;; import React from \u0026#34;react\u0026#34;; import { useCallback, useState, useEffect, useLayoutEffect, useContext, } from \u0026#34;react\u0026#34;; const Context = React.createContext(); export const Provider = ({ store, children }) =\u0026gt; { return \u0026lt;Context.Provider value={store}\u0026gt;{children}\u0026lt;/Context.Provider\u0026gt;; }; export const connect = (mapStateToProps = (state) =\u0026gt; state, mapDispatchToProps) =\u0026gt; (WrapperComponent) =\u0026gt; (props) =\u0026gt; { const store = useContext(Context); const { getState, dispatch, subscribe } = store; const stateProps = mapStateToProps(getState()); let dispatchProps = { dispatch }; if (typeof mapDispatchToProps === \u0026#34;object\u0026#34;) { dispatchProps = { ...bindActionCreators(mapDispatchToProps, dispatch), dispatch, }; } else if (typeof mapDispatchToProps === \u0026#34;function\u0026#34;) { dispatchProps = mapDispatchToProps(dispatch); } const forceUpdate = useForceUpdate(); useLayoutEffect(() =\u0026gt; { const unsubscribe = subscribe(() =\u0026gt; { forceUpdate(); }); return () =\u0026gt; { if (unsubscribe) { unsubscribe(); } }; }, []); return \u0026lt;WrapperComponent {...props} {...stateProps} {...dispatchProps} /\u0026gt;; }; function bindActionCreator(creator, dispatch) { return (...args) =\u0026gt; dispatch(creator(...args)); } export const bindActionCreators = (creators, dispatch) =\u0026gt; { let obj = {}; for (let key in creators) { obj[key] = bindActionCreator(creators[key], dispatch); } return obj; }; const useForceUpdate = () =\u0026gt; { const [state, setState] = useState(0); //const [, setState] = useReducer((prev) =\u0026gt; prev + 1, 0); const update = useCallback(() =\u0026gt; { setState((prev) =\u0026gt; prev + 1); }, []); return update; }; ","permalink":"https://zzydev.top/posts/headfirstreact/%E6%95%B0%E6%8D%AE%E6%98%AF%E5%A6%82%E4%BD%95%E5%9C%A8react%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E6%B5%81%E5%8A%A8%E7%9A%84/","summary":"React çš„æ ¸å¿ƒç‰¹å¾æ˜¯â€œæ•°æ®é©±åŠ¨è§†å›¾â€ï¼Œå³ UI = render(data) åŸºäº props çš„å•å‘æ•°æ®æµ æ‰€è°“å•å‘æ•°æ®æµï¼ŒæŒ‡çš„å°±æ˜¯å½“å‰ç»„ä»¶çš„ state ä»¥ props çš„å½¢å¼æµåŠ¨æ—¶ï¼Œåªèƒ½æµå‘ç»„ä»¶æ ‘ä¸­æ¯”è‡ªå·±å±‚çº§æ›´","title":"æ•°æ®æ˜¯å¦‚ä½•åœ¨Reactç»„ä»¶ä¹‹é—´æµåŠ¨çš„ï¼Ÿ"},{"content":"","permalink":"https://zzydev.top/posts/leetcode/lc16_%E6%9C%80%E6%8E%A5%E8%BF%91%E7%9A%84%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C/","summary":"","title":"Lc16_æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ"},{"content":"","permalink":"https://zzydev.top/posts/leetcode/lc15_%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C/","summary":"","title":"Lc15_ä¸‰æ•°ä¹‹å’Œ"},{"content":"è¯­æ³•é¢˜\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Solution { public: string longestCommonPrefix(vector\u0026lt;string\u0026gt;\u0026amp; strs) { string res; if (strs.empty()) return res; for (int i = 0;; i ++ ) { if (i \u0026gt;= strs[0].size()) return res; char c = strs[0][i]; for (auto\u0026amp; str: strs) if (str.size() \u0026lt;= i || str[i] != c) return res; res += c; } return res; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc14_%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%89%8D%E7%BC%80/","summary":"è¯­æ³•é¢˜ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Solution { public: string longestCommonPrefix(vector\u0026lt;string\u0026gt;\u0026amp; strs) { string res; if (strs.empty()) return res; for (int i = 0;; i ++ ) { if (i \u0026gt;= strs[0].size()) return res; char c = strs[0][i]; for (auto\u0026amp; str: strs) if (str.size() \u0026lt;= i || str[i] != c) return res; res +=","title":"Lc14_æœ€é•¿å…¬å…±å‰ç¼€"},{"content":"å®šä¹‰å­—æ¯ï¼ˆç½—é©¬æ•°å­—ï¼‰åˆ°æ•°å­—ï¼ˆé˜¿æ‹‰ä¼¯æ•°å­—ï¼‰çš„æ˜ å°„ã€‚ ä»å‰å¾€åæ‰«æï¼Œå¦‚æœå‘ç° s[i+1]çš„æ•°å­—æ¯” s[i] çš„æ•°å­—å¤§ï¼Œé‚£ä¹ˆå‡å» s[i]çš„å€¼å³å¯ï¼Œå¦åˆ™ç›´æ¥ç´¯è®¡ s[i] çš„å€¼ã€‚\næ—¶é—´å¤æ‚åº¦ï¼šä»…æ‰«æä¸€éå­—ç¬¦ä¸²ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 class Solution { public: int romanToInt(string s) { unordered_map\u0026lt;char,int\u0026gt; hash { {\u0026#39;I\u0026#39;, 1}, {\u0026#39;V\u0026#39;, 5}, {\u0026#39;X\u0026#39;, 10}, {\u0026#39;L\u0026#39;, 50}, {\u0026#39;C\u0026#39;, 100}, {\u0026#39;D\u0026#39;, 500}, {\u0026#39;M\u0026#39;, 1000} }; int res = 0; for (int i = 0; i \u0026lt; s.size(); i ++) { if (i + 1 \u0026lt; s.size() \u0026amp;\u0026amp; hash[s[i]] \u0026lt; hash[s[i + 1]]) { res -= hash[s[i]]; } else { res += hash[s[i]]; } } return res; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc13_%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97%E8%BD%AC%E6%95%B4%E6%95%B0/","summary":"å®šä¹‰å­—æ¯ï¼ˆç½—é©¬æ•°å­—ï¼‰åˆ°æ•°å­—ï¼ˆé˜¿æ‹‰ä¼¯æ•°å­—ï¼‰çš„æ˜ å°„ã€‚ ä»å‰å¾€åæ‰«æï¼Œå¦‚æœå‘ç° s[i+1]çš„æ•°å­—æ¯” s[i] çš„æ•°å­—å¤§ï¼Œé‚£ä¹ˆå‡å» s[i]çš„å€¼å³å¯ï¼Œå¦åˆ™ç›´æ¥ç´¯è®¡","title":"Lc13_ç½—é©¬æ•°å­—è½¬æ•´æ•°"},{"content":"ç½—é©¬æ•°å­—çš„è®¡æ•°æ–¹æ³•ï¼š\nç›¸åŒçš„æ•°å­—è¿å†™ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºè¿™äº›æ•°å­—ç›¸åŠ çš„å’Œï¼Œå¦‚ï¼šIII=3ï¼› è¾ƒå°çš„æ•°å­—åœ¨è¾ƒå¤§çš„æ•°å­—çš„å³è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºè¿™äº›æ•°å­—ç›¸åŠ çš„å’Œï¼Œå¦‚ï¼šVIII=8, XII=12ï¼› è¾ƒå°çš„æ•°å­—åœ¨è¾ƒå¤§çš„æ•°å­—çš„å·¦è¾¹ï¼ˆé™äº IVã€IXã€XLã€XCã€CD å’Œ CMï¼‰ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºè¾ƒå¤§çš„æ•°å­—å‡è¾ƒå°çš„æ•°å­—å¾—åˆ°çš„æ•°ï¼Œå¦‚ï¼šIV=4, IX=9ï¼› è¿å†™çš„æ•°å­—æœ€å¤šä¸‰æ¬¡ï¼Œå¦‚ï¼šIII=3ï¼› å°†æ‰€æœ‰å‡æ³•æ“ä½œçœ‹åšä¸€ä¸ªæ•´ä½“ï¼Œå½“æˆä¸€ç§æ–°çš„å•ä½ï¼Œå¦‚ï¼šCD = 400ã€‚ä»å¤§åˆ°å°æ•´ç†æ‰€æœ‰å•ä½å¾—åˆ°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 class Solution { public: string intToRoman(int num) { int values[] = { 1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1 }; string reps[] = { \u0026#34;M\u0026#34;, \u0026#34;CM\u0026#34;, \u0026#34;D\u0026#34;, \u0026#34;CD\u0026#34;, \u0026#34;C\u0026#34;, \u0026#34;XC\u0026#34;, \u0026#34;L\u0026#34;, \u0026#34;XL\u0026#34;, \u0026#34;X\u0026#34;, \u0026#34;IX\u0026#34;, \u0026#34;V\u0026#34;, \u0026#34;IV\u0026#34;, \u0026#34;I\u0026#34; }; string res = \u0026#34;\u0026#34;; for (int i = 0; i \u0026lt; 13; i ++) { while (num \u0026gt;= values[i]) { num -= values[i]; res += reps[i]; } } return res; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc12_%E6%95%B4%E6%95%B0%E8%BD%AC%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97/","summary":"ç½—é©¬æ•°å­—çš„è®¡æ•°æ–¹æ³•ï¼š ç›¸åŒçš„æ•°å­—è¿å†™ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºè¿™äº›æ•°å­—ç›¸åŠ çš„å’Œï¼Œå¦‚ï¼šIII=3ï¼› è¾ƒå°çš„æ•°å­—åœ¨è¾ƒå¤§çš„æ•°å­—çš„å³è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºè¿™äº›æ•°å­—ç›¸åŠ ","title":"Lc12_æ•´æ•°è½¬ç½—é©¬æ•°å­—"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 class Solution { public: int maxArea(vector\u0026lt;int\u0026gt;\u0026amp; height) { int len = height.size(); int res = 0; for (int l = 0, r = len - 1; l \u0026lt; r;) { res = max(res, min(height[l], height[r]) * (r - l)); if (height[l] \u0026gt;= height[r]) r --; else if (height[l] \u0026lt; height[r]) l ++; } return res; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc11_%E7%9B%9B%E6%9C%80%E5%A4%9A%E6%B0%B4%E7%9A%84%E5%AE%B9%E5%99%A8/","summary":"1 2 3 4 5 6 7 8 9 10 11 12 13 class Solution { public: int maxArea(vector\u0026lt;int\u0026gt;\u0026amp; height) { int len = height.size(); int res = 0; for (int l = 0, r = len - 1; l \u0026lt; r;) { res = max(res, min(height[l], height[r]) * (r - l)); if (height[l] \u0026gt;= height[r]) r --; else if (height[l] \u0026lt; height[r]) l ++; } return res; } };","title":"Lc11_ç››æœ€å¤šæ°´çš„å®¹å™¨"},{"content":" å¦‚æœp[j] == \u0026lsquo;*\u0026rsquo; ï¼Œå¦‚æœ è¡¨ç¤º 0 ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆ f[i][j] == f[i][j - 2]ï¼Œå¦‚æœè¡¨ç¤º 1 ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆæœ‰ f[i - 1][j - 2] \u0026amp;\u0026amp; s[i] == p[j - 1]ä»¥æ­¤ç±»æ¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class Solution { public: bool isMatch(string s, string p) { // så­—ç¬¦ä¸² på­—ç¬¦è§„å¾‹ int n = s.size(), m = p.size(); // å‡å°‘è¾¹ç•Œå¤„ç† s = s + \u0026#39; \u0026#39;, p = p + \u0026#39; \u0026#39;; vector\u0026lt;vector\u0026lt;bool\u0026gt;\u0026gt; f(n + 1, vector\u0026lt;bool\u0026gt; (m + 1)); f[0][0] = true; for (int i = 0; i \u0026lt; n; i ++) { for (int j = 1; j \u0026lt; m; j ++) { if (j + 1 \u0026lt;= m \u0026amp;\u0026amp; p[j + 1] == \u0026#39;*\u0026#39;) continue; if (i \u0026amp;\u0026amp; p[j] != \u0026#39;*\u0026#39;) { f[i][j] = f[i - 1][j - 1] \u0026amp;\u0026amp; (s[i] == p[j] || p[j] == \u0026#39;.\u0026#39;); } else if(p[j] == \u0026#39;*\u0026#39;){ f[i][j] = f[i][j - 2] || i \u0026amp;\u0026amp; f[i - 1][j] \u0026amp;\u0026amp; (s[i] == p[j - 1]); } } } return f[n][m]; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc10_%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D/","summary":"å¦‚æœp[j] == \u0026lsquo;*\u0026rsquo; ï¼Œå¦‚æœ è¡¨ç¤º 0 ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆ f[i][j] == f[i][j - 2]ï¼Œå¦‚æœè¡¨ç¤º 1 ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆæœ‰ f[i - 1][j - 2] \u0026amp;\u0026amp; s[i] == p[j - 1]ä»¥æ­¤ç±»æ¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15","title":"Lc10_æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…"},{"content":"è§£æ³•ä¸€ 1 2 3 4 5 6 7 8 9 class Solution { public: bool isPalindrome(int x) { string t = to_string(x); auto res = t; reverse(t.begin(), t.end()); return res == t; } }; è§£æ³•äºŒ å¦‚æœè´Ÿæ•°ç›´æ¥è¿”å› falseï¼Œ æ¯”è¾ƒæ­£åºé€†åºæ•°å­—æ˜¯å¦ä¸€æ ·\n1 2 3 4 5 6 7 8 9 10 11 12 13 class Solution { public: bool isPalindrome(int x) { if (x \u0026lt; 0) return false; long long t = 0; int ans = x; while (x) { t = t * 10 + x % 10; x /= 10; } return ans == t; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc09_%E5%9B%9E%E6%96%87%E6%95%B0/","summary":"è§£æ³•ä¸€ 1 2 3 4 5 6 7 8 9 class Solution { public: bool isPalindrome(int x) { string t = to_string(x); auto res = t; reverse(t.begin(), t.end()); return res == t; } }; è§£æ³•äºŒ å¦‚æœè´Ÿæ•°ç›´æ¥è¿”å› falseï¼Œ æ¯”è¾ƒæ­£åºé€†åºæ•°å­—æ˜¯å¦ä¸€æ · 1 2 3 4 5","title":"Lc09_å›æ–‡æ•°"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 class Solution { public: int myAtoi(string s) { int k = 0; while (k \u0026lt; s.size() \u0026amp;\u0026amp; s[k] == \u0026#39; \u0026#39;) k ++; //å»é™¤å‰å¯¼ç©ºæ ¼ if (k == s.size()) return 0; int minus = 1; if (s[k] == \u0026#39;-\u0026#39;) k ++, minus = -1; else if (s[k] == \u0026#39;+\u0026#39;) k ++; int res = 0; while (k \u0026lt; s.size() \u0026amp;\u0026amp; s[k] \u0026gt;= \u0026#39;0\u0026#39; \u0026amp;\u0026amp; s[k] \u0026lt;= \u0026#39;9\u0026#39;) { int x = s[k] - \u0026#39;0\u0026#39;; if (minus \u0026gt; 0 \u0026amp;\u0026amp; res \u0026gt; (INT_MAX - x) / 10) return INT_MAX; //minus = -1ï¼Œé‚£resæ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥ -res * 10 - x \u0026lt; INT_MINå°±ä¼šæº¢å‡º if (minus \u0026lt; 0 \u0026amp;\u0026amp; -res \u0026lt; (INT_MIN + x) / 10) return INT_MIN; if (-res * 10 - x == INT_MIN) return INT_MIN; res = res * 10 + x; k ++ ; } res *= minus; return res; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc08_%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E6%95%B4%E6%95%B0aoti/","summary":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 class Solution { public: int myAtoi(string s) { int k = 0; while (k \u0026lt; s.size() \u0026amp;\u0026amp; s[k] == \u0026#39; \u0026#39;) k ++; //å»é™¤å‰å¯¼ç©ºæ ¼ if (k == s.size()) return 0; int minus = 1; if (s[k] == \u0026#39;-\u0026#39;)","title":"Lc08_å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°(aoti)"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 class Solution { public: int reverse(int x) { int res = 0; while (x) { if (x \u0026gt; 0 \u0026amp;\u0026amp; res \u0026gt; (INT_MAX - x % 10) / 10) return 0; if (x \u0026lt; 0 \u0026amp;\u0026amp; res \u0026lt; (INT_MIN - x % 10) / 10) return 0; res = res * 10 + x % 10; x /= 10; } return res; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc07_%E6%95%B4%E6%95%B0%E5%8F%8D%E8%BD%AC/","summary":"1 2 3 4 5 6 7 8 9 10 11 12 13 class Solution { public: int reverse(int x) { int res = 0; while (x) { if (x \u0026gt; 0 \u0026amp;\u0026amp; res \u0026gt; (INT_MAX - x % 10) / 10) return 0; if (x \u0026lt; 0 \u0026amp;\u0026amp; res \u0026lt; (INT_MIN - x % 10) / 10) return 0; res = res * 10 + x % 10; x","title":"Lc07_æ•´æ•°åè½¬"},{"content":"é¢˜è§£ é¢˜ç›®è¦æ±‚**å‡è®¾ç¯å¢ƒä¸å…è®¸å­˜å‚¨ 64 ä½æ•´æ•°ï¼ˆæœ‰ç¬¦å·æˆ–æ— ç¬¦å·ï¼‰**æ‰€ä»¥åªèƒ½ä½¿ç”¨ int\næˆ‘ä»¬è¦ä¿è¯ res * 10 + x % 10 ä¸è¶Šç•Œï¼Œé‚£ä¹ˆæœ‰å½“ x \u0026gt; 0 æ—¶ï¼Œ res * 10 + x % 10 \u0026lt; INT_MAX é€šè¿‡ç­‰ä»·å˜å½¢ res * 10 \u0026lt; INT_MAX - x % 10 ã€‚\nç”±äº x \u0026gt; 0 æ‰€ä»¥ï¼Œ(INT_MAX - x % 10) / 10ä¸ä¼šæº¢å‡º\nåŒç†ï¼Œå½“ x \u0026lt; 0ï¼ŒINT_MIN - x % 10 è´Ÿæ•°å‡è´Ÿæ•°ä¹Ÿä¸ä¼šæº¢å‡ºã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Solution { public: string convert(string s, int numRows) { string res = \u0026#34;\u0026#34;; for (int i = 0; i \u0026lt; numRows; i ++) { if (i == 0 || i == numRows - 1) { for (int j = i; j \u0026lt; s.size(); j += 2 * numRows - 2) { res += s[j]; } } else { for (int j = i, k = 2 * numRows - 2 - i; j \u0026lt; s.size() || k \u0026lt; s.size(); j += 2 * numRows - 2, k += 2 * numRows - 2) { if (j \u0026lt; s.size()) res += s[j]; if (k \u0026lt; s.size()) res += s[k]; } } } return res; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc06_z%E5%AD%97%E5%BD%A2%E5%8F%98%E6%8D%A2/","summary":"é¢˜è§£ é¢˜ç›®è¦æ±‚**å‡è®¾ç¯å¢ƒä¸å…è®¸å­˜å‚¨ 64 ä½æ•´æ•°ï¼ˆæœ‰ç¬¦å·æˆ–æ— ç¬¦å·ï¼‰**æ‰€ä»¥åªèƒ½ä½¿ç”¨ int æˆ‘ä»¬è¦ä¿è¯ res * 10 + x % 10 ä¸è¶Šç•Œï¼Œé‚£ä¹ˆæœ‰å½“ x \u0026gt; 0 æ—¶ï¼Œ res * 10 + x %","title":"Lc06_Zå­—å½¢å˜æ¢"},{"content":"æš´åŠ›æšä¸¾ï¼š\né¦–å…ˆæšä¸¾å›æ–‡ä¸²çš„ä¸­å¿ƒ iï¼Œç„¶ååˆ†ä¸¤ç§æƒ…å†µå‘ä¸¤è¾¹æ‰©å±•è¾¹ç•Œï¼Œç›´åˆ°é‡åˆ°ä¸åŒå­—ç¬¦ä¸ºæ­¢ã€‚\nåˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š\nå›æ–‡ä¸²é•¿åº¦æ˜¯å¥‡æ•° å¦‚ï¼š\u0026ldquo;babab\u0026rdquo; å›æ–‡ä¸²é•¿åº¦æ˜¯å¶æ•° å¦‚ï¼š\u0026ldquo;bbcc\u0026rdquo; å¦‚æœé‡åˆ°ä¸åŒå­—ç¬¦ï¼Œåˆ™æˆ‘ä»¬å°±æ‰¾åˆ°äº†ä»¥ i ä¸ºä¸­å¿ƒçš„å›æ–‡ä¸²è¾¹ç•Œã€‚\næ—¶é—´å¤æ‚åº¦ï¼šä¸€å…±ä¸¤å±‚å¾ªç¯ï¼Œ$O(n^2)$\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 class Solution { public: string longestPalindrome(string s) { string res = \u0026#34;\u0026#34;; for (int i = 0; i \u0026lt; s.size(); i ++) { //å¶æ•° int l = i, r = i + 1; while (l \u0026gt;= 0 \u0026amp;\u0026amp; r \u0026lt; s.size() \u0026amp;\u0026amp; s[l] == s[r]) l --, r ++; if (res.size() \u0026lt; r - l - 1) res = s.substr(l + 1, r - l - 1); //å¥‡æ•° l = i - 1, r = i + 1; while (l \u0026gt;= 0 \u0026amp;\u0026amp; r \u0026lt; s.size() \u0026amp;\u0026amp; s[l] == s[r]) l --, r ++; if (res.size() \u0026lt; r - l - 1) res = s.substr(l + 1, r - l - 1); } return res; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc05_%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/","summary":"æš´åŠ›æšä¸¾ï¼š é¦–å…ˆæšä¸¾å›æ–‡ä¸²çš„ä¸­å¿ƒ iï¼Œç„¶ååˆ†ä¸¤ç§æƒ…å†µå‘ä¸¤è¾¹æ‰©å±•è¾¹ç•Œï¼Œç›´åˆ°é‡åˆ°ä¸åŒå­—ç¬¦ä¸ºæ­¢ã€‚ åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š å›æ–‡ä¸²é•¿åº¦æ˜¯å¥‡æ•° å¦‚ï¼š\u0026ldquo;ba","title":"Lc05_æœ€é•¿å›æ–‡å­ä¸²"},{"content":"åŒæŒ‡é’ˆç»å…¸æ¨¡æ¿ï¼š\nclass Solution { public: int lengthOfLongestSubstring(string s) { unordered_map\u0026lt;int, int\u0026gt; hash; int res = 0; for (int l = 0, r = 0; r \u0026lt; s.size(); r ++) { hash[s[r]] ++; while (hash[s[r]] \u0026gt; 1) hash[s[l ++]] --; if (res \u0026lt; r - l + 1) res = r - l + 1; } return res; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc03_%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/","summary":"åŒæŒ‡é’ˆç»å…¸æ¨¡æ¿ï¼š class Solution { public: int lengthOfLongestSubstring(string s) { unordered_map\u0026lt;int, int\u0026gt; hash; int res = 0; for (int l = 0, r = 0; r \u0026lt; s.size(); r ++) { hash[s[r]] ++; while (hash[s[r]] \u0026gt; 1) hash[s[l ++]] --; if (res \u0026lt; r - l + 1) res = r - l + 1; } return res; } };","title":"Lc03_æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"},{"content":"é¢˜è§£ï¼š æ¨¡æ‹ŸåŠ æ³•è¿‡ç¨‹ï¼š\nä¸¾ä¸ª ğŸŒ°ï¼šæˆ‘ä»¬è®¡ç®— abc + efgï¼Œæˆ‘ä»¬åº”è¯¥å…ˆè®¡ç®— c + g å¦‚æœç»“æœå¤§äºç­‰äº 10 åˆ™è¿› 1ï¼Œç„¶åç»§ç»­è®¡ç®— b + f å†åŠ ä¸Šä¹‹å‰çš„ è¿›ä½ ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€ä½çš„ç»“æœæ˜¯ ï¼šä¸Šä¸€ä½è¿›ä½åŠ ä¸Šå½“å‰ä½æ‰€æœ‰æ•°çš„å’Œ\næ³¨ï¼šä¸€èˆ¬æ¥è¯´ï¼Œæ¨¡æ‹ŸåŠ æ³•çš„é¢˜ç›®éƒ½è¦ reverse å¤„ç†ä¸€ä¸‹ï¼Œä½†æ˜¯è¿™é“é¢˜æ˜¯ä»ä¸ªä½å¼€å§‹ï¼Œå°±ä¸ç”¨ reverse\næ—¶é—´å¤æ‚åº¦ï¼šO(n + m) n å’Œ m æ˜¯ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 /** * Definition for singly-linked list. * struct ListNode { * int val; * ListNode *next; * ListNode() : val(0), next(nullptr) {} * ListNode(int x) : val(x), next(nullptr) {} * ListNode(int x, ListNode *next) : val(x), next(next) {} * }; */ class Solution { public: ListNode* addTwoNumbers(ListNode* l1, ListNode* l2) { int carry = 0; auto dummy = new ListNode(0); auto ret = dummy; while (l1 || l2 || carry) { if (l1) { carry += l1-\u0026gt;val; l1 = l1-\u0026gt;next; } if (l2) { carry += l2-\u0026gt;val; l2 = l2-\u0026gt;next; } dummy-\u0026gt;next = new ListNode(carry % 10); carry /= 10; dummy = dummy-\u0026gt;next; } return ret-\u0026gt;next; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc02_%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0/","summary":"é¢˜è§£ï¼š æ¨¡æ‹ŸåŠ æ³•è¿‡ç¨‹ï¼š ä¸¾ä¸ª ğŸŒ°ï¼šæˆ‘ä»¬è®¡ç®— abc + efgï¼Œæˆ‘ä»¬åº”è¯¥å…ˆè®¡ç®— c + g å¦‚æœç»“æœå¤§äºç­‰äº 10 åˆ™è¿› 1ï¼Œç„¶åç»§ç»­è®¡ç®— b + f å†åŠ ä¸Šä¹‹å‰çš„ è¿›ä½ ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œ","title":"Lc02_ä¸¤æ•°ç›¸åŠ "},{"content":"React15çš„ç”Ÿå‘½å‘¨æœŸ Mounting é˜¶æ®µï¼šç»„ä»¶çš„åˆå§‹åŒ–æ¸²æŸ“ï¼ˆæŒ‚è½½ï¼‰ æŒ‚è½½è¿‡ç¨‹åœ¨ç»„ä»¶çš„ä¸€ç”Ÿä¸­ä»…ä¼šå‘ç”Ÿä¸€æ¬¡ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç»„ä»¶è¢«åˆå§‹åŒ–ï¼Œç„¶åä¼šè¢«æ¸²æŸ“åˆ°çœŸå® DOM é‡Œï¼Œå®Œæˆæ‰€è°“çš„â€œé¦–æ¬¡æ¸²æŸ“â€ã€‚\næ³¨æ„ render åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¹¶ä¸ä¼šå»æ“ä½œçœŸå® DOMï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸ä¼šæ¸²æŸ“ï¼‰ï¼Œå®ƒçš„èŒèƒ½æ˜¯æŠŠéœ€è¦æ¸²æŸ“çš„å†…å®¹è¿”å›å‡ºæ¥ã€‚çœŸå® DOM çš„æ¸²æŸ“å·¥ä½œï¼Œåœ¨æŒ‚è½½é˜¶æ®µæ˜¯ç”± ReactDOM.render æ¥æ‰¿æ¥çš„ã€‚\ncomponentDidMount æ–¹æ³•åœ¨æ¸²æŸ“ç»“æŸåè¢«è§¦å‘ï¼Œæ­¤æ—¶å› ä¸ºçœŸå® DOM å·²ç»æŒ‚è½½åˆ°äº†é¡µé¢ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œ**æ‰§è¡ŒçœŸå® DOM ç›¸å…³çš„æ“ä½œï¼Œ**ç±»ä¼¼äºå¼‚æ­¥è¯·æ±‚ã€æ•°æ®åˆå§‹åŒ–è¿™æ ·çš„æ“ä½œä¹Ÿå¤§å¯ä»¥æ”¾åœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ¥åšã€‚\nUpdating é˜¶æ®µï¼šç»„ä»¶çš„æ›´æ–° componentWillReceiProps(nextProps) åˆ°åº•æ˜¯ç”±ä»€ä¹ˆè§¦å‘çš„ï¼Ÿ åœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•é‡Œï¼ŒnextProps è¡¨ç¤ºçš„æ˜¯æ¥æ”¶åˆ°æ–° props å†…å®¹ï¼Œè€Œç°æœ‰çš„ props ï¼ˆç›¸å¯¹äº nextProps çš„â€œæ—§ propsâ€ï¼‰æˆ‘ä»¬å¯ä»¥é€šè¿‡ this.props æ‹¿åˆ°ï¼Œç”±æ­¤ä¾¿èƒ½å¤Ÿæ„ŸçŸ¥åˆ° props çš„å˜åŒ–ã€‚\ncomponentReceiveProps å¹¶ä¸æ˜¯ç”± props çš„å˜åŒ–è§¦å‘çš„ï¼Œè€Œæ˜¯ç”±çˆ¶ç»„ä»¶çš„æ›´æ–°è§¦å‘çš„ã€‚\nå¦‚æœçˆ¶ç»„ä»¶å¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå³ä½¿propsæ²¡æœ‰æ›´æ”¹ä¹Ÿä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼ˆcomponentWillReceiPropsï¼‰ å¦‚æœåªæƒ³å¤„ç†æ›´æ”¹ï¼Œè¯·ç¡®ä¿å½“å‰å€¼ä¸å˜æ›´å€¼çš„æ¯”è¾ƒ \u0026mdash;-Reactå®˜æ–¹\nç»„ä»¶è‡ªèº« setState è§¦å‘çš„æ›´æ–° componentWillUpdate ä¼šåœ¨ render å‰è¢«è§¦å‘ï¼Œå®ƒå’Œ componentWillMount ç±»ä¼¼ï¼Œå…è®¸ä½ åœ¨é‡Œé¢åšä¸€äº›ä¸æ¶‰åŠçœŸå® DOM æ“ä½œçš„å‡†å¤‡å·¥ä½œï¼›è€Œ componentDidUpdate åˆ™åœ¨ç»„ä»¶æ›´æ–°å®Œæ¯•åè¢«è§¦å‘ï¼Œå’Œ componentDidMount ç±»ä¼¼ï¼Œè¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¹Ÿç»å¸¸è¢«ç”¨æ¥å¤„ç† DOM æ“ä½œã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¸¸å¸¸å°† componentDidUpdate çš„æ‰§è¡Œä½œä¸ºå­ç»„ä»¶æ›´æ–°å®Œæ¯•çš„æ ‡å¿—é€šçŸ¥åˆ°çˆ¶ç»„ä»¶ã€‚\nrender ä¸æ€§èƒ½ï¼šåˆè¯† shouldComponentUpdate(nextProps, nextState) React ç»„ä»¶ä¼šæ ¹æ® shouldComponentUpdate çš„è¿”å›å€¼ï¼Œæ¥å†³å®šæ˜¯å¦æ‰§è¡Œè¯¥æ–¹æ³•ä¹‹åçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿›è€Œå†³å®šæ˜¯å¦å¯¹ç»„ä»¶è¿›è¡Œre-renderï¼ˆé‡æ¸²æŸ“ï¼‰ã€‚shouldComponentUpdate çš„é»˜è®¤å€¼ä¸º trueï¼Œä¹Ÿå°±æ˜¯è¯´â€œæ— æ¡ä»¶ re-renderâ€ã€‚åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€é€šè¿‡æ‰‹åŠ¨å¾€ shouldComponentUpdate ä¸­å¡«å……åˆ¤å®šé€»è¾‘ï¼Œæˆ–è€…ç›´æ¥åœ¨é¡¹ç›®ä¸­å¼•å…¥ PureComponent ç­‰æœ€ä½³å®è·µï¼Œæ¥å®ç°â€œæœ‰æ¡ä»¶çš„ re-renderâ€ã€‚\nUnmounting é˜¶æ®µï¼šç»„ä»¶çš„å¸è½½ ç»„ä»¶é”€æ¯çš„å¸¸è§åŸå› æœ‰ä»¥ä¸‹ä¸¤ä¸ªã€‚\nç»„ä»¶åœ¨çˆ¶ç»„ä»¶ä¸­è¢«ç§»é™¤äº†ï¼šè¿™ç§æƒ…å†µç›¸å¯¹æ¯”è¾ƒç›´è§‚ ç»„ä»¶ä¸­è®¾ç½®äº† key å±æ€§ï¼Œçˆ¶ç»„ä»¶åœ¨ render çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç° key å€¼å’Œä¸Šä¸€æ¬¡ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶å°±ä¼šè¢«å¹²æ‰ã€‚ React16çš„ç”Ÿå‘½å‘¨æœŸ Mounting é˜¶æ®µï¼šç»„ä»¶çš„åˆå§‹åŒ–æ¸²æŸ“ï¼ˆæŒ‚è½½ï¼‰ è®¤è¯† getDerivedStateFromProps(props,state) getDerivedStateFromPropsè¿™ä¸ªAPIï¼Œå…¶è®¾è®¡çš„åˆè¡·ä¸æ˜¯è¯•å›¾æ›¿æ¢æ‰componentWillMount ï¼Œè€Œæ˜¯è¯•å›¾æ›¿æ¢æ‰componentWillReceivePropsï¼Œå› æ­¤å®ƒæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç”¨é€”:ä½¿ç”¨ props æ¥æ´¾ç”Ÿ/æ›´æ–° state\ngetDerivedStateFromProps æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ä¸ä¾èµ–ç»„ä»¶å®ä¾‹è€Œå­˜åœ¨ï¼Œå› æ­¤ä½ åœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨æ˜¯è®¿é—®ä¸åˆ° this çš„ã€‚\nè¯¥æ–¹æ³•å¯ä»¥æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šprops å’Œ stateï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨å½“å‰ç»„ä»¶æ¥æ”¶åˆ°çš„æ¥è‡ªçˆ¶ç»„ä»¶çš„ props å’Œå½“å‰ç»„ä»¶è‡ªèº«çš„ stateã€‚\ngetDerivedStateFromProps éœ€è¦ä¸€ä¸ªå¯¹è±¡æ ¼å¼çš„è¿”å›å€¼ã€‚å¦‚æœä½ æ²¡æœ‰æŒ‡å®šè¿™ä¸ªè¿”å›å€¼ï¼Œé‚£ä¹ˆå¤§æ¦‚ç‡ä¼šè¢« React è­¦å‘Šä¸€ç•ªã€‚\ngetDerivedStateFromProps æ–¹æ³•å¯¹ state çš„æ›´æ–°åŠ¨ä½œå¹¶éâ€œè¦†ç›–â€å¼çš„æ›´æ–°ï¼Œè€Œæ˜¯é’ˆå¯¹æŸä¸ªå±æ€§çš„å®šå‘æ›´æ–°ã€‚æ¯”å¦‚è¿™é‡Œæˆ‘ä»¬åœ¨ getDerivedStateFromProps é‡Œè¿”å›çš„æ˜¯è¿™æ ·ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œé¢æœ‰ä¸€ä¸ª fatherText å±æ€§ç”¨äºè¡¨ç¤ºâ€œçˆ¶ç»„ä»¶èµ‹äºˆçš„æ–‡æœ¬â€ï¼š\n1 2 3 { fatherText: props.text } è¯¥å¯¹è±¡å¹¶ä¸ä¼šæ›¿æ¢æ‰ç»„ä»¶åŸå§‹çš„è¿™ä¸ª stateï¼š\n1 this.state = { text: \u0026#34;å­ç»„ä»¶çš„æ–‡æœ¬\u0026#34; }; è€Œæ˜¯ä»…ä»…é’ˆå¯¹ fatherText è¿™ä¸ªå±æ€§ä½œæ›´æ–°ï¼ˆè¿™é‡ŒåŸæœ‰çš„ state é‡Œæ²¡æœ‰ fatherTextï¼Œå› æ­¤ç›´æ¥æ–°å¢ï¼‰ã€‚æ›´æ–°åï¼ŒåŸæœ‰å±æ€§ä¸æ–°å±æ€§æ˜¯å…±å­˜çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Updating é˜¶æ®µï¼šç»„ä»¶çš„æ›´æ–° React 16.4 çš„æŒ‚è½½å’Œå¸è½½æµç¨‹éƒ½æ˜¯ä¸ React 16.3 ä¿æŒä¸€è‡´çš„ï¼Œå·®å¼‚åœ¨äºæ›´æ–°æµç¨‹ä¸Šï¼š\nåœ¨ React 16.4 ä¸­ï¼Œä»»ä½•å› ç´ è§¦å‘çš„ç»„ä»¶æ›´æ–°æµç¨‹ï¼ˆåŒ…æ‹¬ç”± this.setState å’Œ forceUpdate è§¦å‘çš„æ›´æ–°æµç¨‹ï¼‰éƒ½ä¼šè§¦å‘ getDerivedStateFromPropsï¼›\nè€Œåœ¨ v 16.3 ç‰ˆæœ¬æ—¶ï¼Œåªæœ‰çˆ¶ç»„ä»¶çš„æ›´æ–°ä¼šè§¦å‘è¯¥ç”Ÿå‘½å‘¨æœŸã€‚\nä¸ºä»€ä¹ˆè¦ç”¨ getDerivedStateFromProps ä»£æ›¿ componentWillReceivePropsï¼Ÿ åšåˆç†çš„å‡æ³•ï¼š\ngetDerivedStateFromProps ç›´æ¥è¢«å®šä¹‰ä¸º static æ–¹æ³•ï¼Œstatic æ–¹æ³•å†…éƒ¨æ‹¿ä¸åˆ°ç»„ä»¶å®ä¾‹çš„ thisï¼Œè¿™å°±å¯¼è‡´ä½ æ— æ³•åœ¨ getDerivedStateFromProps é‡Œé¢åšä»»ä½•ç±»ä¼¼äº this.fetch()ã€ä¸åˆç†çš„ this.setStateï¼ˆä¼šå¯¼è‡´æ­»å¾ªç¯çš„é‚£ç§ï¼‰è¿™ç±»å¯èƒ½ä¼šäº§ç”Ÿå‰¯ä½œç”¨çš„æ“ä½œã€‚ è¿™æ˜¯ React 16 åœ¨å¼ºåˆ¶æ¨è¡Œâ€œåªç”¨ getDerivedStateFromProps æ¥å®Œæˆ props åˆ° state çš„æ˜ å°„â€è¿™ä¸€æœ€ä½³å®è·µã€‚æ„åœ¨ç¡®ä¿ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„è¡Œä¸ºæ›´åŠ å¯æ§å¯é¢„æµ‹ï¼Œä»æ ¹æºä¸Šå¸®å¼€å‘è€…é¿å…ä¸åˆç†çš„ç¼–ç¨‹æ–¹å¼ï¼Œé¿å…ç”Ÿå‘½å‘¨æœŸçš„æ»¥ç”¨ï¼›åŒæ—¶ï¼Œä¹Ÿæ˜¯åœ¨ä¸ºæ–°çš„ Fiber æ¶æ„é“ºè·¯ã€‚ æ¶ˆå¤±çš„ componentWillUpdate ä¸æ–°å¢çš„ getSnapshotBeforeUpdate(prevProps, prevState) getSnapshotBeforeUpdateæ–¹æ³•éœ€è¦ä¸€ä¸ªè¿”å›å€¼ï¼Œå®ƒçš„è¿”å›å€¼ä¼šä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ç»™åˆ° componentDidUpdateã€‚å®ƒçš„æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ render æ–¹æ³•ä¹‹åï¼ŒçœŸå® DOM æ›´æ–°ä¹‹å‰ã€‚åœ¨è¿™ä¸ªé˜¶æ®µé‡Œï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶è·å–åˆ°æ›´æ–°å‰çš„çœŸå® DOM å’Œæ›´æ–°å‰åçš„ state\u0026amp;props çš„ä¿¡æ¯ã€‚\né‡ç‚¹æŠŠæ¡å®ƒä¸componentDidUpdate é—´çš„é€šä¿¡è¿‡ç¨‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 // ç»„ä»¶æ›´æ–°æ—¶è°ƒç”¨ getSnapshotBeforeUpdate(prevProps, prevState) { console.log(\u0026#34;getSnapshotBeforeUpdateæ–¹æ³•æ‰§è¡Œ\u0026#34;); return \u0026#34;haha\u0026#34;; } // ç»„ä»¶æ›´æ–°åè°ƒç”¨ componentDidUpdate(prevProps, prevState, valueFromSnapshot) { console.log(\u0026#34;componentDidUpdateæ–¹æ³•æ‰§è¡Œ\u0026#34;); console.log(\u0026#34;ä» getSnapshotBeforeUpdate è·å–åˆ°çš„å€¼æ˜¯\u0026#34;, valueFromSnapshot); } è¿™ä¸ªç”Ÿå‘½å‘¨æœŸçš„è®¾è®¡åˆè¡·ï¼Œæ˜¯ä¸ºäº†â€œä¸ componentDidUpdate ä¸€èµ·ï¼Œæ¶µç›–è¿‡æ—¶çš„ componentWillUpdate çš„æ‰€æœ‰ç”¨ä¾‹â€ã€‚getSnapshotBeforeUpdate è¦æƒ³å‘æŒ¥ä½œç”¨ï¼Œç¦»ä¸å¼€ componentDidUpdate çš„é…åˆã€‚\nReact16ä¸ºä½•ä¸¤æ¬¡æ±‚å˜ï¼Ÿ Fiber ä¼šä½¿åŸæœ¬åŒæ­¥çš„æ¸²æŸ“è¿‡ç¨‹å˜æˆå¼‚æ­¥çš„ã€‚ åŒæ­¥æ¸²æŸ“çš„é€’å½’è°ƒç”¨æ ˆæ˜¯éå¸¸æ·±çš„ï¼Œåªæœ‰æœ€åº•å±‚çš„è°ƒç”¨è¿”å›äº†ï¼Œæ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹æ‰ä¼šå¼€å§‹é€å±‚è¿”å›ã€‚è¿™ä¸ªæ¼«é•¿ä¸”ä¸å¯æ‰“æ–­çš„æ›´æ–°è¿‡ç¨‹ï¼Œå°†ä¼šå¸¦æ¥ç”¨æˆ·ä½“éªŒå±‚é¢çš„å·¨å¤§é£é™©ï¼šåŒæ­¥æ¸²æŸ“ä¸€æ—¦å¼€å§‹ï¼Œä¾¿ä¼šç‰¢ç‰¢æŠ“ä½ä¸»çº¿ç¨‹ä¸æ”¾ï¼Œç›´åˆ°é€’å½’å½»åº•å®Œæˆã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨æ²¡æœ‰åŠæ³•å¤„ç†ä»»ä½•æ¸²æŸ“ä¹‹å¤–çš„äº‹æƒ…ï¼Œä¼šè¿›å…¥ä¸€ç§æ— æ³•å¤„ç†ç”¨æˆ·äº¤äº’çš„çŠ¶æ€ã€‚å› æ­¤è‹¥æ¸²æŸ“æ—¶é—´ç¨å¾®é•¿ä¸€ç‚¹ï¼Œé¡µé¢å°±ä¼šé¢ä¸´å¡é¡¿ç”šè‡³å¡æ­»çš„é£é™©ã€‚\nè€Œ React 16 å¼•å…¥çš„ Fiber æ¶æ„ï¼Œæ°å¥½èƒ½å¤Ÿè§£å†³æ‰è¿™ä¸ªé£é™©ï¼šFiber ä¼šå°†ä¸€ä¸ªå¤§çš„æ›´æ–°ä»»åŠ¡æ‹†è§£ä¸ºè®¸å¤šä¸ªå°ä»»åŠ¡ã€‚æ¯å½“æ‰§è¡Œå®Œä¸€ä¸ªå°ä»»åŠ¡æ—¶ï¼Œæ¸²æŸ“çº¿ç¨‹éƒ½ä¼šæŠŠä¸»çº¿ç¨‹äº¤å›å»ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ä¼˜å…ˆçº§æ›´é«˜çš„å·¥ä½œè¦å¤„ç†ï¼Œç¡®ä¿ä¸ä¼šå‡ºç°å…¶ä»–ä»»åŠ¡è¢«â€œé¥¿æ­»â€çš„æƒ…å†µï¼Œè¿›è€Œé¿å…åŒæ­¥æ¸²æŸ“å¸¦æ¥çš„å¡é¡¿ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¸²æŸ“çº¿ç¨‹ä¸å†â€œä¸€å»ä¸å›å¤´â€ï¼Œè€Œæ˜¯å¯ä»¥è¢«æ‰“æ–­çš„ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œå¼‚æ­¥æ¸²æŸ“â€ã€‚\næ¢ä¸ªè§’åº¦çœ‹ç”Ÿå‘½å‘¨æœŸå·¥ä½œæµ Fiber æ¶æ„çš„é‡è¦ç‰¹å¾å°±æ˜¯å¯ä»¥è¢«æ‰“æ–­çš„å¼‚æ­¥æ¸²æŸ“æ¨¡å¼ã€‚ä½†è¿™ä¸ªâ€œæ‰“æ–­â€æ˜¯æœ‰åŸåˆ™çš„ï¼Œæ ¹æ®â€œèƒ½å¦è¢«æ‰“æ–­â€è¿™ä¸€æ ‡å‡†ï¼ŒReact 16 çš„ç”Ÿå‘½å‘¨æœŸè¢«åˆ’åˆ†ä¸ºäº† render å’Œ commit ä¸¤ä¸ªé˜¶æ®µï¼Œè€Œ commit é˜¶æ®µåˆè¢«ç»†åˆ†ä¸ºäº† pre-commit å’Œ commitã€‚æ¯ä¸ªé˜¶æ®µæ‰€æ¶µç›–çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\næ€»çš„æ¥è¯´ï¼Œrender é˜¶æ®µåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å…è®¸è¢«æ‰“æ–­ï¼Œè€Œ commit é˜¶æ®µåˆ™æ€»æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚\nä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡å‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œç”±äº render é˜¶æ®µçš„æ“ä½œå¯¹ç”¨æˆ·æ¥è¯´å…¶å®æ˜¯â€œä¸å¯è§â€çš„ï¼Œæ‰€ä»¥å°±ç®—æ‰“æ–­å†é‡å¯ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ä¹Ÿæ˜¯é›¶æ„ŸçŸ¥ã€‚è€Œ commit é˜¶æ®µçš„æ“ä½œåˆ™æ¶‰åŠçœŸå® DOM çš„æ¸²æŸ“ï¼Œå†ç‹‚çš„æ¡†æ¶ä¹Ÿä¸æ•¢åœ¨ç”¨æˆ·çœ¼çš®å­åº•ä¸‹èƒ¡ä¹±æ›´æ”¹è§†å›¾ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹å¿…é¡»ç”¨åŒæ­¥æ¸²æŸ“æ¥æ±‚ç¨³ã€‚\nç»†è¯´ç”Ÿå‘½å‘¨æœŸâ€œåºŸæ—§ç«‹æ–°â€èƒŒåçš„æ€è€ƒ åœ¨ Fiber æœºåˆ¶ä¸‹ï¼Œrender é˜¶æ®µæ˜¯å…è®¸æš‚åœã€ç»ˆæ­¢å’Œé‡å¯çš„ã€‚å½“ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œåˆ°ä¸€åŠè¢«æ‰“æ–­åï¼Œä¸‹ä¸€æ¬¡æ¸²æŸ“çº¿ç¨‹æŠ¢å›ä¸»åŠ¨æƒæ—¶ï¼Œè¿™ä¸ªä»»åŠ¡è¢«é‡å¯çš„å½¢å¼æ˜¯â€œé‡å¤æ‰§è¡Œä¸€éæ•´ä¸ªä»»åŠ¡â€è€Œéâ€œæ¥ç€ä¸Šæ¬¡æ‰§è¡Œåˆ°çš„é‚£è¡Œä»£ç å¾€ä¸‹èµ°â€ã€‚è¿™å°±å¯¼è‡´ render é˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸéƒ½æ˜¯æœ‰å¯èƒ½è¢«é‡å¤æ‰§è¡Œçš„ã€‚\nå¸¦ç€è¿™ä¸ªç»“è®ºï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ React 16 æ‰“ç®—åºŸå¼ƒçš„æ˜¯å“ªäº›ç”Ÿå‘½å‘¨æœŸï¼š\ncomponentWillMountï¼› componentWillUpdateï¼› componentWillReceivePropsã€‚ è¿™äº›ç”Ÿå‘½å‘¨æœŸçš„å…±æ€§ï¼Œå°±æ˜¯å®ƒä»¬éƒ½å¤„äº render é˜¶æ®µï¼Œéƒ½å¯èƒ½é‡å¤è¢«æ‰§è¡Œï¼Œè€Œä¸”ç”±äºè¿™äº› API å¸¸å¹´è¢«æ»¥ç”¨ï¼Œå®ƒä»¬åœ¨é‡å¤æ‰§è¡Œçš„è¿‡ç¨‹ä¸­éƒ½å­˜åœ¨ç€ä¸å¯å°è§‘çš„é£é™©ã€‚\nåœ¨â€œcomponentWillâ€å¼€å¤´çš„ç”Ÿå‘½å‘¨æœŸé‡Œï¼Œä½ ä¹ æƒ¯äºåšçš„äº‹æƒ…å¯èƒ½åŒ…æ‹¬ä½†ä¸é™äº:\nsetState()ï¼› fetch å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼› æ“ä½œçœŸå® DOMã€‚ è¿™äº›æ“ä½œçš„é—®é¢˜ï¼ˆæˆ–ä¸å¿…è¦æ€§ï¼‰åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹ 3 ç‚¹ï¼š\nå®Œå…¨å¯ä»¥è½¬ç§»åˆ°å…¶ä»–ç”Ÿå‘½å‘¨æœŸï¼ˆå°¤å…¶æ˜¯ componentDidxxxï¼‰é‡Œå»åšã€‚\næ¯”å¦‚åœ¨ componentWillMount é‡Œå‘èµ·å¼‚æ­¥è¯·æ±‚ã€‚å¾ˆå¤šåŒå­¦å› ä¸ºå¤ªå¹´è½»ï¼Œä»¥ä¸ºè¿™æ ·åšå°±å¯ä»¥è®©å¼‚æ­¥è¯·æ±‚å›æ¥å¾—â€œæ—©ä¸€ç‚¹â€ï¼Œä»è€Œé¿å…é¦–æ¬¡æ¸²æŸ“ç™½å±ã€‚\nä½†æ˜¯å¼‚æ­¥è¯·æ±‚å†æ€ä¹ˆå¿«ä¹Ÿå¿«ä¸è¿‡ï¼ˆReact 15 ä¸‹ï¼‰åŒæ­¥çš„ç”Ÿå‘½å‘¨æœŸã€‚componentWillMount ç»“æŸåï¼Œrender ä¼šè¿…é€Ÿåœ°è¢«è§¦å‘ï¼Œæ‰€ä»¥è¯´é¦–æ¬¡æ¸²æŸ“ä¾ç„¶ä¼šåœ¨æ•°æ®è¿”å›ä¹‹å‰æ‰§è¡Œã€‚è¿™æ ·åšä¸ä»…æ²¡æœ‰è¾¾åˆ°ä½ é¢„æƒ³çš„ç›®çš„ï¼Œè¿˜ä¼šå¯¼è‡´æœåŠ¡ç«¯æ¸²æŸ“åœºæ™¯ä¸‹çš„å†—ä½™è¯·æ±‚ç­‰é¢å¤–é—®é¢˜ï¼Œå¾—ä¸å¿å¤±ã€‚\nåœ¨ Fiber å¸¦æ¥çš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„ Bugã€‚\næ¯”å¦‚ componentWillxxx é‡Œå‘èµ·äº†ä¸€ä¸ªä»˜æ¬¾è¯·æ±‚ã€‚ç”±äº render é˜¶æ®µé‡Œçš„ç”Ÿå‘½å‘¨æœŸéƒ½å¯ä»¥é‡å¤æ‰§è¡Œï¼Œåœ¨ componentWillxxx è¢«æ‰“æ–­ + é‡å¯å¤šæ¬¡åï¼Œå°±ä¼šå‘å‡ºå¤šä¸ªä»˜æ¬¾è¯·æ±‚ã€‚\nåˆæˆ–è€…ä½ å¯èƒ½ä¼šä¹ æƒ¯åœ¨ componentWillReceiveProps é‡Œæ“ä½œ DOMï¼ˆæ¯”å¦‚è¯´åˆ é™¤ç¬¦åˆæŸä¸ªç‰¹å¾çš„å…ƒç´ ï¼‰ï¼Œé‚£ä¹ˆ componentWillReceiveProps è‹¥æ˜¯æ‰§è¡Œäº†ä¸¤æ¬¡ï¼Œä½ å¯èƒ½å°±ä¼šä¸€å£æ°”åˆ æ‰ä¸¤ä¸ªç¬¦åˆè¯¥ç‰¹å¾çš„å…ƒç´ ã€‚\ngetDerivedStateFromProps ä¸ºä½•ä¼šåœ¨è®¾è®¡å±‚é¢ç›´æ¥è¢«çº¦æŸä¸ºä¸€ä¸ªè§¦ç¢°ä¸åˆ° this çš„é™æ€æ–¹æ³•ï¼Œå…¶èƒŒåçš„åŸå› ä¹Ÿå°±æ›´åŠ å……åˆ†äº†â€”â€”é¿å…å¼€å‘è€…è§¦ç¢° thisï¼Œå°±æ˜¯åœ¨é¿å…å„ç§å±é™©çš„éªšæ“ä½œã€‚\nå³ä½¿ä½ æ²¡æœ‰å¼€å¯å¼‚æ­¥ï¼ŒReact 15 ä¸‹ä¹Ÿæœ‰ä¸å°‘äººèƒ½æŠŠè‡ªå·±â€œç©æ­»â€ã€‚\næ¯”å¦‚åœ¨ componentWillReceiveProps å’Œ componentWillUpdate é‡Œæ»¥ç”¨ setState å¯¼è‡´é‡å¤æ¸²æŸ“æ­»å¾ªç¯çš„ã€‚\næ€»çš„æ¥è¯´ï¼ŒReact 16 æ”¹é€ ç”Ÿå‘½å‘¨æœŸçš„ä¸»è¦åŠ¨æœºæ˜¯ä¸ºäº†é…åˆ Fiber æ¶æ„å¸¦æ¥çš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ã€‚åœ¨è¿™ä¸ªæ”¹é€ çš„è¿‡ç¨‹ä¸­ï¼ŒReact å›¢é˜Ÿé’ˆå¯¹ç”Ÿå‘½å‘¨æœŸä¸­é•¿æœŸè¢«æ»¥ç”¨çš„éƒ¨åˆ†æ¨è¡Œäº†å…·æœ‰å¼ºåˆ¶æ€§çš„æœ€ä½³å®è·µ**ã€‚è¿™ä¸€ç³»åˆ—çš„å·¥ä½œåšä¸‹æ¥ï¼Œé¦–å…ˆæ˜¯ç¡®ä¿äº† Fiber æœºåˆ¶ä¸‹æ•°æ®å’Œè§†å›¾çš„å®‰å…¨æ€§ï¼ŒåŒæ—¶ä¹Ÿç¡®ä¿äº†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„è¡Œä¸ºæ›´åŠ çº¯ç²¹ã€å¯æ§ã€å¯é¢„æµ‹ã€‚\n","permalink":"https://zzydev.top/posts/headfirstreact/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","summary":"React15çš„ç”Ÿå‘½å‘¨æœŸ Mounting é˜¶æ®µï¼šç»„ä»¶çš„åˆå§‹åŒ–æ¸²æŸ“ï¼ˆæŒ‚è½½ï¼‰ æŒ‚è½½è¿‡ç¨‹åœ¨ç»„ä»¶çš„ä¸€ç”Ÿä¸­ä»…ä¼šå‘ç”Ÿä¸€æ¬¡ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç»„ä»¶è¢«åˆå§‹åŒ–ï¼Œç„¶åä¼šè¢«æ¸²æŸ“åˆ°çœŸå® DOM","title":"Reactç”Ÿå‘½å‘¨æœŸ"},{"content":" JSX çš„æœ¬è´¨ï¼šJavaScript çš„è¯­æ³•æ‰©å±• JSX ä¼šè¢«ç¼–è¯‘ä¸º React.createElement()ï¼ŒÂ React.createElement() å°†è¿”å›ä¸€ä¸ªå«ä½œâ€œReact Elementâ€çš„ JS å¯¹è±¡ã€‚\nBabel å…·å¤‡å°† JSX è¯­æ³•è½¬æ¢ä¸º javascript çš„èƒ½åŠ›\nBabel çš„åœ¨çº¿åœ°å€\nJSX æ˜¯å¦‚ä½•æ˜ å°„ä¸º DOM çš„ï¼šèµ·åº• createElement æºç  createElement æºç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 //Reactçš„åˆ›å»ºå…ƒç´ æ–¹æ³• export function createElement(type, config, children) { // propName å˜é‡ç”¨äºå‚¨å­˜åé¢éœ€è¦ç”¨åˆ°çš„å…ƒç´ å±æ€§ let propName; // props å˜é‡ç”¨äºå‚¨å­˜å…ƒç´ å±æ€§çš„é”®å€¼å¯¹é›†åˆ const props = {}; // keyã€refã€selfã€source å‡ä¸º React å…ƒç´ çš„å±æ€§ï¼Œæ­¤å¤„ä¸å¿…æ·±ç©¶ let key = null; let ref = null; let self = null; let source = null; // config å¯¹è±¡ä¸­å­˜å‚¨çš„æ˜¯å…ƒç´ çš„å±æ€§ if (config != null) { // è¿›æ¥ä¹‹ååšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œæ˜¯ä¾æ¬¡å¯¹ refã€keyã€self å’Œ source å±æ€§èµ‹å€¼ if (hasValidRef(config)) { ref = config.ref; } // æ­¤å¤„å°† key å€¼å­—ç¬¦ä¸²åŒ– if (hasValidKey(config)) { key = \u0026#34;\u0026#34; + config.key; } self = config.__self === undefined ? null : config.__self; source = config.__source === undefined ? null : config.__source; // æ¥ç€å°±æ˜¯è¦æŠŠ config é‡Œé¢çš„å±æ€§éƒ½ä¸€ä¸ªä¸€ä¸ªæŒªåˆ° props è¿™ä¸ªä¹‹å‰å£°æ˜å¥½çš„å¯¹è±¡é‡Œé¢ for (propName in config) { if ( // ç­›é€‰å‡ºå¯ä»¥æè¿› props å¯¹è±¡é‡Œçš„å±æ€§ hasOwnProperty.call(config, propName) \u0026amp;\u0026amp; !RESERVED_PROPS.hasOwnProperty(propName) ) { props[propName] = config[propName]; } } } // childrenLength æŒ‡çš„æ˜¯å½“å‰å…ƒç´ çš„å­å…ƒç´ çš„ä¸ªæ•°ï¼Œå‡å»çš„ 2 æ˜¯ type å’Œ config ä¸¤ä¸ªå‚æ•°å ç”¨çš„é•¿åº¦ const childrenLength = arguments.length - 2; // å¦‚æœæŠ›å»typeå’Œconfigï¼Œå°±åªå‰©ä¸‹ä¸€ä¸ªå‚æ•°ï¼Œä¸€èˆ¬æ„å‘³ç€æ–‡æœ¬èŠ‚ç‚¹å‡ºç°äº† if (childrenLength === 1) { // ç›´æ¥æŠŠè¿™ä¸ªå‚æ•°çš„å€¼èµ‹ç»™props.children props.children = children; // å¤„ç†åµŒå¥—å¤šä¸ªå­å…ƒç´ çš„æƒ…å†µ } else if (childrenLength \u0026gt; 1) { // å£°æ˜ä¸€ä¸ªå­å…ƒç´ æ•°ç»„ const childArray = Array(childrenLength); // æŠŠå­å…ƒç´ æ¨è¿›æ•°ç»„é‡Œ for (let i = 0; i \u0026lt; childrenLength; i++) { childArray[i] = arguments[i + 2]; } // æœ€åæŠŠè¿™ä¸ªæ•°ç»„èµ‹å€¼ç»™props.children props.children = childArray; } // å¤„ç† defaultProps if (type \u0026amp;\u0026amp; type.defaultProps) { const defaultProps = type.defaultProps; for (propName in defaultProps) { if (props[propName] === undefined) { props[propName] = defaultProps[propName]; } } } // æœ€åè¿”å›ä¸€ä¸ªè°ƒç”¨ReactElementæ‰§è¡Œæ–¹æ³•ï¼Œå¹¶ä¼ å…¥åˆšæ‰å¤„ç†è¿‡çš„å‚æ•° return ReactElement( type, key, ref, self, source, ReactCurrentOwner.current, props ); } å…¥å‚è§£è¯»ï¼šåˆ›é€ ä¸€ä¸ªå…ƒç´ éœ€è¦çŸ¥é“å“ªäº›ä¿¡æ¯ 1 export function createElement(type, config, children) typeï¼šç”¨äºæ ‡è¯†èŠ‚ç‚¹çš„ç±»å‹ã€‚å®ƒå¯ä»¥æ˜¯ç±»ä¼¼â€œh1â€â€œdivâ€è¿™æ ·çš„æ ‡å‡† HTML æ ‡ç­¾å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ React ç»„ä»¶ç±»å‹æˆ– React fragment ç±»å‹ã€‚ configï¼šä»¥å¯¹è±¡å½¢å¼ä¼ å…¥ï¼Œç»„ä»¶æ‰€æœ‰çš„å±æ€§éƒ½ä¼šä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨åœ¨ config å¯¹è±¡ä¸­ã€‚ childrenï¼šä»¥å¯¹è±¡å½¢å¼ä¼ å…¥ï¼Œå®ƒè®°å½•çš„æ˜¯ç»„ä»¶æ ‡ç­¾ä¹‹é—´åµŒå¥—çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œå­èŠ‚ç‚¹â€â€œå­å…ƒç´ â€ã€‚ createElement å‡½æ•°æ‹†è§£ createElement çš„æ¯ä¸€ä¸ªæ­¥éª¤å‡ ä¹éƒ½æ˜¯åœ¨æ ¼å¼åŒ–æ•°æ®\ncreateElement å°±åƒæ˜¯å¼€å‘è€…å’Œ ReactElement è°ƒç”¨ä¹‹é—´çš„ä¸€ä¸ªæ•°æ®å¤„ç†å±‚ã€‚å®ƒå¯ä»¥ä»å¼€å‘è€…å¤„æ¥å—ç›¸å¯¹ç®€å•çš„å‚æ•°ï¼Œç„¶åå°†è¿™äº›å‚æ•°æŒ‰ç…§ ReactElement çš„é¢„æœŸåšä¸€å±‚æ ¼å¼åŒ–ï¼Œæœ€ç»ˆé€šè¿‡è°ƒç”¨ ReactElement æ¥å®ç°å…ƒç´ çš„åˆ›å»ºã€‚æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå‡ºå‚è§£è¯» åˆè¯†è™šæ‹Ÿ dom ReactElement æºç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 const ReactElement = function (type, key, ref, self, source, owner, props) { const element = { // This tag allows us to uniquely identify this as a React Element $$typeof: REACT_ELEMENT_TYPE, // Built-in properties that belong on the element type: type, key: key, ref: ref, props: props, // Record the component responsible for creating this element. _owner: owner, }; if (DEV) { /*è¿™é‡Œæ˜¯ä¸€äº›é’ˆå¯¹ __DEV__ ç¯å¢ƒä¸‹çš„å¤„ç†ï¼Œå¯¹äºç†è§£ä¸»è¦é€»è¾‘æ„ä¹‰ä¸å¤§ï¼Œæ•…çœç•¥*/ } return element; }; ReactElement æŠŠä¼ å…¥çš„å‚æ•°æŒ‰ç…§ä¸€å®šçš„è§„èŒƒï¼Œâ€œç»„è£…â€è¿›äº† element å¯¹è±¡é‡Œï¼Œå¹¶æŠŠå®ƒè¿”å›ç»™äº† React.createElementï¼Œæœ€ç»ˆ React.createElement åˆæŠŠå®ƒäº¤å›åˆ°äº†å¼€å‘è€…æ‰‹ä¸­ã€‚\næƒ³è¦éªŒè¯è¿™ä¸€ç‚¹ï¼Œå¯ä»¥æ‰“å°è¾“å‡º JSX éƒ¨åˆ†ï¼š\n1 2 3 4 5 6 7 8 const AppJSX = ( \u0026lt;div className=\u0026#34;App\u0026#34;\u0026gt; \u0026lt;h1 className=\u0026#34;title\u0026#34;\u0026gt;I am the title\u0026lt;/h1\u0026gt; \u0026lt;p className=\u0026#34;content\u0026#34;\u0026gt;I am the content\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; ); console.log(AppJSX); ä½ ä¼šå‘ç°å®ƒç¡®å®æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ ReactElement å¯¹è±¡å®ä¾‹ï¼Œå¦‚ä¸‹å›¾ï¼š\nè¿™ä¸ª ReactElement å¯¹è±¡å®ä¾‹ï¼Œæœ¬è´¨ä¸Šæ˜¯ ä»¥ JavaScript å¯¹è±¡å½¢å¼å­˜åœ¨çš„å¯¹ DOM çš„æè¿° ï¼Œä¹Ÿå°±æ˜¯ è™šæ‹Ÿ DOM ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ ã€‚\nâ€œè™šæ‹Ÿ DOMâ€éœ€è¦é€šè¿‡ ReactDOM.renderæ–¹æ³•å˜æˆæ¸²æŸ“åˆ°é¡µé¢ä¸Šçš„çœŸå® DOM\nåœ¨æ¯ä¸€ä¸ª React é¡¹ç›®çš„å…¥å£æ–‡ä»¶ä¸­ï¼Œéƒ½å°‘ä¸äº†å¯¹ ReactDOM.render å‡½æ•°çš„è°ƒç”¨ã€‚\n","permalink":"https://zzydev.top/posts/headfirstreact/jsx%E6%98%AF%E5%A6%82%E4%BD%95%E5%8F%98%E6%88%90%E4%B8%BAdom%E7%9A%84/","summary":"JSX çš„æœ¬è´¨ï¼šJavaScript çš„è¯­æ³•æ‰©å±• JSX ä¼šè¢«ç¼–è¯‘ä¸º React.createElement()ï¼Œ React.createElement() å°†è¿”å›ä¸€ä¸ªå«ä½œâ€œReact Elementâ€","title":"JSX æ˜¯å¦‚ä½•å˜æˆä¸º DOM çš„"},{"content":"æ‰‹å†™ instanceof 1 2 3 4 5 6 7 8 9 function myInstanceof(Left, Right) { if (typeof Left !== \u0026#34;object\u0026#34; || Left === null) return false; let proto = Object.getPrototypeOf(Left); while (true) { if (proto == null) return false; if (protp == Right.prototype) return true; proto = Object.getPrototypeOf(proto); } } æ‰‹å†™ getType 1 2 3 4 5 6 7 8 function getType(obj) { let type = typeof obj; if (type !== \u0026#34;object\u0026#34;) return type; return Object.prototype .toString() .call(obj) .replace(/^\\[object (\\S+)\\]$/, \u0026#34;S1\u0026#34;); } æ‰‹å†™æµ…æ‹·è´ 1 2 3 4 5 6 7 8 9 10 11 12 13 function shallowClone(target) { if (typeof target === \u0026#34;object\u0026#34; \u0026amp;\u0026amp; target !== null) { const cloneTarget = Array.isArray() ? [] : {}; for (let prop in target) { if (target.hasOwnProperty(prop)) { cloneTarget[prop] = target[prop]; } } return cloneTarget; } else { return target; } } æ‰‹å†™æ·±æ‹·è´ å°æ¯\n1 2 3 4 5 6 7 8 9 10 11 function deepClone(obj) { let cloneObj = {}; for (let key in obj) { if (typeof key === \u0026#34;obj\u0026#34; \u0026amp;\u0026amp; key !== null) { cloneObj[key] = deepClone(obj[key]); } else { cloneObj[key] = obj[key]; } } return cloneObj; } è¶…å¤§æ¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 const isComplexDataType = (obj) =\u0026gt; (typeof obj === \u0026#34;object\u0026#34; || typeof obj === \u0026#34;function\u0026#34;) \u0026amp;\u0026amp; obj !== null; function deepClone(obj, hash = new WeakMap()) { if (obj instanceof Date) return +new Date(obj); if (obj instanceof RegExp) return new RegExp(obj); if (hash.has(obj)) return hash.get(obj); //è·å–å¯¹è±¡æ‰€æœ‰å±æ€§åŠå…¶å¯¹åº”çš„ç‰¹å¾ let allDesc = Object.getOwnPropertyDescriptors(obj); //ç»§æ‰¿åŸå¯¹è±¡çš„åŸå‹é“¾ let cloneObj = Object.create(Object.getPrototypeOf(obj), allDesc); hash.set(obj, cloneObj); for (let key of Reflect.ownKeys()) { cloneObj[key] = isComplexDataType(obj[key]) \u0026amp;\u0026amp; typeof obj[key] !== \u0026#34;function\u0026#34; ? deepClone(obj[key], hash) : obj[key]; } return cloneObj; } JS WeakMap åº”è¯¥ä»€ä¹ˆæ—¶å€™ä½¿ç”¨\næ‰‹å†™æ·±æ¯”è¾ƒ 1 2 3 4 5 6 7 8 9 10 11 12 13 const isObject = (obj) =\u0026gt; typeof obj === \u0026#34;object\u0026#34; \u0026amp;\u0026amp; obj !== null; function isEqual(obj1, obj2) { if (isObject(obj1) ^ isObject(obj2)) return false; if (obj1 === obj2) return true; const obj1Key = Object.keys(obj1); const obj2Key = Object.keys(obj2); if (obj1Key.length !== obj2Key.length) return false; for (let key in obj) { const res = isEqual(obj1[key], obj2[key]); if (!res) return false; } return true; } æ‰‹å†™ call ã€apply ã€bind 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 Function.prototype.myCall = function (context, ...args) { // xxx.myCall() thiså°±æ˜¯è¿™é‡Œçš„xxx myApplyå’ŒmyBindä¸­çš„thisåŒç† context.func = this; context.func(...args); delete context.func; }; Function.prototype.myBind = function () { const args = Array.from(arguments); const t = args.shift(); const self = this; return function () { return self.apply(t, args); }; }; Function.prototype.myApply = function (context, args) { context.func = this; context.func(...args); delete context.func; }; æ‰‹å†™ Object.create() 1 2 3 4 5 6 //è¿™ä¸ªå‡½æ•°æ— æ³•åšåˆ°ä¸åŸç”Ÿçš„ Object.create ä¸€è‡´ï¼Œä¸€ä¸ªæ˜¯ä¸æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸æ”¯æŒ null ä½œä¸ºåŸå‹ Object.create = function (prototype) { var cls = function () {}; cls.prototype = prototype; return new cls(); }; æ‰‹å†™ new 1 2 3 4 5 6 7 8 9 10 11 12 function myNew(...args) { // å–å‡º args æ•°ç»„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³ç›®æ ‡æ„é€ å‡½æ•° const constructor = args.shift(); // åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä¸”è¿™ä¸ªç©ºå¯¹è±¡ç»§æ‰¿æ„é€ å‡½æ•°çš„ prototype å±æ€§ // å³å®ç° obj.__proto__ = constructor.prototype const obj = Object.create(constructor.prototype); // æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œå¾—åˆ°æ„é€ å‡½æ•°è¿”å›ç»“æœ // æ³¨æ„è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ applyï¼Œå°†æ„é€ å‡½æ•°å†…çš„ this æŒ‡å‘ä¸º obj const result = constructor.apply(obj, args); // å¦‚æœæ„é€ å‡½æ•°æ‰§è¡Œåï¼Œè¿”å›ç»“æœæ˜¯å¯¹è±¡ç±»å‹ï¼Œå°±ç›´æ¥è¿”å›ï¼Œå¦åˆ™è¿”å› obj å¯¹è±¡ return typeof result === \u0026#34;object\u0026#34; \u0026amp;\u0026amp; result != null ? result : obj; } æ‰‹å†™é˜²æŠ–èŠ‚æµ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 // Throttle(äº‹ä»¶èŠ‚æµ)ï¼š ç¬¬ä¸€ä¸ªäººè¯´äº†ç®— // fnæ˜¯æˆ‘ä»¬éœ€è¦åŒ…è£…çš„äº‹ä»¶å›è°ƒ, intervalæ˜¯æ—¶é—´é—´éš”çš„é˜ˆå€¼ function throttle(fn, interval) { // lastä¸ºä¸Šä¸€æ¬¡è§¦å‘å›è°ƒçš„æ—¶é—´ let last = 0; // å°†throttleå¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿”å› return function () { // ä¿ç•™è°ƒç”¨æ—¶çš„thisä¸Šä¸‹æ–‡ let context = this; // ä¿ç•™è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•° let args = arguments; // è®°å½•æœ¬æ¬¡è§¦å‘å›è°ƒçš„æ—¶é—´ let now = new Date(); // åˆ¤æ–­ä¸Šæ¬¡è§¦å‘çš„æ—¶é—´å’Œæœ¬æ¬¡è§¦å‘çš„æ—¶é—´å·®æ˜¯å¦å°äºæ—¶é—´é—´éš”çš„é˜ˆå€¼ if (now - last \u0026gt;= interval) { // å¦‚æœæ—¶é—´é—´éš”å¤§äºæˆ‘ä»¬è®¾å®šçš„æ—¶é—´é—´éš”é˜ˆå€¼ï¼Œåˆ™æ‰§è¡Œå›è°ƒ last = now; fn.apply(context, args); } }; } // ç”¨throttleæ¥åŒ…è£…scrollçš„å›è°ƒ const better_scroll = throttle(() =\u0026gt; console.log(\u0026#34;è§¦å‘äº†æ»šåŠ¨äº‹ä»¶\u0026#34;), 1000); document.addEventListener(\u0026#34;scroll\u0026#34;, better_scroll); // Debounce(äº‹ä»¶é˜²æŠ–)ï¼š æœ€åä¸€ä¸ªäººè¯´äº†ç®— // fnæ˜¯æˆ‘ä»¬éœ€è¦åŒ…è£…çš„äº‹ä»¶å›è°ƒ, delayæ˜¯æ¯æ¬¡æ¨è¿Ÿæ‰§è¡Œçš„ç­‰å¾…æ—¶é—´ function debounce(fn, delay) { // å®šæ—¶å™¨ let timer = null; // å°†debounceå¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿”å› return function () { // ä¿ç•™è°ƒç”¨æ—¶çš„thisä¸Šä¸‹æ–‡ let context = this; // ä¿ç•™è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•° let args = arguments; // æ¯æ¬¡äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œéƒ½å»æ¸…é™¤ä¹‹å‰çš„æ—§å®šæ—¶å™¨ if (timer) { clearTimeout(timer); } // è®¾ç«‹æ–°å®šæ—¶å™¨ timer = setTimeout(function () { fn.apply(context, args); }, delay); }; } // ç”¨debounceæ¥åŒ…è£…scrollçš„å›è°ƒ const better_scroll = debounce(() =\u0026gt; console.log(\u0026#34;è§¦å‘äº†æ»šåŠ¨äº‹ä»¶\u0026#34;), 1000); document.addEventListener(\u0026#34;scroll\u0026#34;, better_scroll); æ‰‹å†™ String.prototype.trim 1 2 3 String.prototype.trim = function () { return this.replace(/^\\s+/, \u0026#34;\u0026#34;).replace(/\\s+$/, \u0026#34;\u0026#34;); }; æ‰‹å†™ Array.flat 1 2 3 4 5 6 7 const flat = (arr) =\u0026gt; { const isDeep = arr.some((item) =\u0026gt; item instanceof Array); if (!isDeep) return arr; const res = Array.prototype.concat.apply([], arr); return flat(res); }; æ‰‹å†™å»é‡ 1 2 3 4 const unique = (arr) =\u0026gt; { const set = new Set(arr); return [...arr]; }; æ‰‹å†™ setInterval 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 const mySetInterval = (fn, delay) =\u0026gt; { let timer = null, isClear = false; function loop() { if (isClear) { isClear = false; clearTimeout(timer); return; } fn(); timer = setTimeout(loop, delay); } timer = setTimeout(loop, delay); return () =\u0026gt; { isClear = true; }; }; æ‰‹å†™ åˆ¤æ–­ç±»æ•°ç»„ 1 2 3 4 5 6 7 8 9 10 const isArrayLikeObject = (arr) =\u0026gt; { if (typeof arr !== \u0026#34;object\u0026#34; || arr === null) return false; const lengthMaxVal = Math.pow(2, 53) - 1; if (!Object.prototype.hasOwnProperty.call(arr, \u0026#34;length\u0026#34;)) return false; if (typeof arr.length !== \u0026#34;number\u0026#34;) return false; if (!isFinite(arr.length)) return false; if (Array !== arr.constructor) return false; if (arr.length \u0026gt; 0 \u0026amp;\u0026amp; arr.length \u0026lt; lengthMaxVal) return true; return false; }; æ‰‹å†™ æ¨¡æ‹Ÿç§æœ‰ 1 2 3 4 5 6 7 8 9 function cls() { this.a = \u0026#34;who care\u0026#34;; return { getVal: () =\u0026gt; this.a, }; } let obj = new cls(); obj.getVal(); 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 const myWm = new WeakMap(); class Fish { constructor(name) { myWm.set(this, { _fishbone: [ \u0026#34;è‰é±¼\u0026#34;, \u0026#34;é²«é±¼\u0026#34;, \u0026#34;é’é±¼\u0026#34;, \u0026#34;é²¤é±¼\u0026#34;, \u0026#34;é²¢é±¼\u0026#34;, \u0026#34;é³™é±¼\u0026#34;, \u0026#34;é³Šé±¼\u0026#34;, \u0026#34;ç¿˜å˜´\u0026#34;, \u0026#34;é¤æ¡\u0026#34;, ], }); this.name = name; } isBone() { return myWm.get(this)._fishbone.includes(this.name); } } // æµ‹è¯•ï¼Œä¹°äº†ä¸¤æ¡é±¼ let fish1 = new Fish(\u0026#34;è‰é±¼\u0026#34;); let fish2 = new Fish(\u0026#34;å›é±¼\u0026#34;); // è¿”å› trueï¼Œæœ‰åˆº console.log(fish1.isBone()); // è¿”å› falseï¼Œæ²¡æœ‰è‚Œé—´åˆº console.log(fish2.isBone()); è·å–å½“å‰ url ä¸­çš„å‚æ•°çš„å€¼ 1 2 3 4 5 const query = (name) =\u0026gt; { const search = location.search; const params = new URLSearchParams(search); return params.get(name); }; å°† URL å‚æ•°è§£æä¸º JS å¯¹è±¡ 1 2 3 4 5 6 7 8 9 function queryToObject() { const res = {}; const search = location.search; const pList = new URLSearchParams(search); pList.forEach((key, val) =\u0026gt; { res[key] = val; }); return res; } ","permalink":"https://zzydev.top/posts/eight-part-essay/%E6%9C%89%E6%89%8B%E5%B0%B1%E8%A1%8C/","summary":"æ‰‹å†™ instanceof 1 2 3 4 5 6 7 8 9 function myInstanceof(Left, Right) { if (typeof Left !== \u0026#34;object\u0026#34; || Left === null) return false; let proto = Object.getPrototypeOf(Left); while (true) { if (proto == null) return false; if (protp == Right.prototype) return true; proto = Object.getPrototypeOf(proto); } } æ‰‹å†™ getType 1 2 3 4 5 6 7 8 function getType(obj) { let type = typeof obj;","title":"æœ‰æ‰‹å°±è¡Œ"},{"content":"ä½¿ç”¨ C++ä¸­çš„å“ˆå¸Œè¡¨â€”â€”unordered_map\u0026lt;int, int\u0026gt;\nå¾ªç¯ä¸€é nums æ•°ç»„ï¼Œåœ¨æ¯æ­¥å¾ªç¯ä¸­æˆ‘ä»¬åˆ¤æ–­ target - nums[i] æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­ ï¼š\nå¦‚æœæ˜¯å°±æ‰¾åˆ°å’Œä¸º target çš„ä¸€å¯¹æ•°å­—ï¼Œç›´æ¥è¿”å›ç­”æ¡ˆå³å¯ï¼› å¦‚æœå¦å°±å°† nums[i] æ’å…¥å“ˆå¸Œè¡¨ä¸­ï¼›\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class Solution { public: vector\u0026lt;int\u0026gt; twoSum(vector\u0026lt;int\u0026gt;\u0026amp; nums, int target) { unordered_map\u0026lt;int,int\u0026gt; hash; for (int i = 0; i \u0026lt; nums.size();i ++) { if (hash.count(target - nums[i])) { return {hash[target - nums[i]], i}; } else { hash[nums[i]] = i; } } return {}; } }; ","permalink":"https://zzydev.top/posts/leetcode/lc01_%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/","summary":"ä½¿ç”¨ C++ä¸­çš„å“ˆå¸Œè¡¨â€”â€”unordered_map\u0026lt;int, int\u0026gt; å¾ªç¯ä¸€é nums æ•°ç»„ï¼Œåœ¨æ¯æ­¥å¾ªç¯ä¸­æˆ‘ä»¬åˆ¤æ–­ target - nums[i] æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­ ï¼š å¦‚æœæ˜¯å°±æ‰¾åˆ°å’Œ","title":"Lc01_ä¸¤æ•°ä¹‹å’Œ"}]